"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2984,95813,15906,65923,31348],{901855:(e,t,i)=>{i.d(t,{Hv:()=>l,aX:()=>c,nK:()=>h});var r=i(667294),a=i(616550),s=i(342513),n=i(785893);let{Provider:o,useHook:l}=(0,s.Z)("HistoryStackContext",{previous:[],current:null,forward:[]}),d=e=>e&&e.pathname?e.pathname+(e.search||""):"";function u(e,t){let i={action:t.type,location:t.location,match:t.match};if(t.location===e.current?.location)return e;switch(t.type){case"POP":if(e.forward.length>0&&d(e.forward[0].location)===d(i.location))return{...e,forward:e.forward.slice(1),current:{...e.forward[0],action:t.type},previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};return{...e,forward:e.current?[{action:e.current.action,location:e.current.location,match:e.current.match},...e.forward]:e.forward,current:{...e.previous.slice(-1)[0],action:t.type},previous:e.previous.slice(0,-1)};case"PUSH":return{...e,forward:e.forward.length>0?[]:e.forward,current:i,previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};case"REPLACE":return{...e,current:i};default:return e}}function c(){let{current:e,previous:t}=l(),i=(0,r.useMemo)(()=>e?t.concat(e):t,[e,t]);return i}function h({children:e}){let t=(0,a.k6)(),i=(0,a.TH)(),s=(0,a.$B)(),l={forward:[],current:{action:t.action,location:i,match:s},previous:[]},[d,c]=(0,r.useReducer)(u,l);return(0,r.useEffect)(()=>{let{action:e}=t;c({type:e,location:i,match:s})},[i]),(0,n.jsx)(o,{value:d,children:e})}},406893:(e,t,i)=>{i.d(t,{Z:()=>s}),i(441143);var r=i(785893);class a{static factory(e){return e instanceof a?e:new a(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}function s(e){let{css:t,unsafeCSS:i,...s}=e,n=String(t||"")||i||"",o=!!n;return o?(0,r.jsx)("style",{...s,dangerouslySetInnerHTML:{__html:String(a.factory(n))}}):null}},934378:(e,t,i)=>{i.d(t,{$N:()=>m,Cu:()=>f,GY:()=>d,MZ:()=>n,NR:()=>c,Vn:()=>u,bC:()=>y,fm:()=>r,kM:()=>s,q6:()=>a,qp:()=>l,uV:()=>h,ug:()=>p,xL:()=>o});let r={DOWNLOAD_TEMPLATE:"DOWNLOAD_TEMPLATE",UPLOAD_TEMPLATE:"UPLOAD_TEMPLATE",HISTORY:"HISTORY",RESOURCES:"RESOURCES"},a={GENERAL:"GENERAL",CAMPAIGNS:"CAMPAIGNS",AD_GROUPS:"AD_GROUPS",ADS:"ADS",KEYWORDS:"KEYWORDS",PRODUCT_GROUPS:"PRODUCT_GROUPS",ERROR_CODES:"ERROR_CODES"},s={BILLING_HISTORY:"BILLING_HISTORY",BILLING_FORMS:"BILLING_FORMS",ORDER_LINES:"ORDER_LINES",PROMOTIONS:"PROMOTIONS",TAX_DOCUMENTS:"TAX_DOCUMENTS",DOCUMENTS:"DOCUMENTS",PREPAID_CAMPAIGN_SPEND:"PREPAID_CAMPAIGN_SPEND_SUMMARY"},n={GOOGLE_TAG_MANAGER:"Google Tag Manager",SHOPIFY:"Shopify",WOO_COMMERCE:"WooCommerce",WORDPRESS:"WordPress",SQUARESPACE:"Squarespace",WEEBLY:"Weebly",TEALIUM:"Tealium",MAGENTO:"Magento",ECWID:"Ecwid",BIG_COMMERCE:"BigCommerce",PREMMERCE:"Premmerce",SEGMENT:"Segment",BRANCH:"Branch",HIGHTOUCH:"Hightouch",EULERIAN:"Eulerian",ADOBE_CDP:"Adobe Real-Time CDP",ADOBE_COMMERCE:"Adobe Commerce",SALESFORCE_COMMERCE_CLOUD:"Salesforce Commerce Cloud"},o={GTM:"GTM",SHOPIFY:"SHOPIFY",WORDPRESS:"WORDPRESS",WOOCOMMERCE:"WOOCOMMERCE",TEALIUM:"TEALIUM"},l={PINTEREST_TAG:"PINTEREST_TAG",PINTEREST_TAG_MANUAL_SETUP_FLOW:"PINTEREST_TAG_MANUAL_SETUP_FLOW",PINTEREST_TEST_EVENTS:"PINTEREST_TEST_EVENTS",PINTEREST_TAG_HEALTH:"PINTEREST_TAG_HEALTH",CONVERSION_HEALTH:"CONVERSION_HEALTH",CONVERSION_UPLOAD:"CONVERSION_UPLOAD",UPLOAD_HISTORY:"UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD:"PCA_UPLOAD",CONVERSIONS_API:"CONVERSIONS_API",CONVERSIONS_API_ACCESS_TOKEN:"CONVERSIONS_API_ACCESS_TOKEN",CONVERSIONS_API_DEDUPLICATION:"CONVERSIONS_API_DEDUPLICATION",CONVERSIONS_API_PARTNER_SETUP_FLOW:"CONVERSIONS_API_PARTNER_SETUP_FLOW",CONVERSIONS_API_MANUAL_SETUP_FLOW:"CONVERSIONS_API_MANUAL_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW:"PINTEREST_EVENTS_OVERVIEW",PINTEREST_EVENT_HISTORY:"PINTEREST_EVENT_HISTORY",CONVERSIONS:"CONVERSIONS",PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP:"PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP",PINTEREST_SETUP_API:"PINTEREST_SETUP_API",NOCODE_CONVERSIONS_API_SETUP_FLOW:"NOCODE_CONVERSIONS_API_SETUP_FLOW"},d={PINTEREST_TAG_DASHBOARD:"PINTEREST_TAG_DASHBOARD",PINTEREST_TAG_LANDING:"PINTEREST_TAG_LANDING",PINTEREST_TAG_INSTRUCTIONS:"PINTEREST_TAG_INSTRUCTIONS",CONVERSION_UPLOAD_LANDING:"CONVERSION_UPLOAD_LANDING",CONVERSION_UPLOAD_VALIDATION:"CONVERSION_UPLOAD_VALIDATION",CONVERSION_UPLOAD_HISTORY:"CONVERSION_UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD_LANDING:"PCA_UPLOAD_LANDING",PCA_UPLOAD_VALIDATION:"PCA_UPLOAD_VALIDATION"},u={UNREAD:"UNREAD",READ:"READ",ACCEPTED:"ACCEPTED",REJECTED:"REJECTED",DISMISSED:"DISMISSED",INVALID:"INVALID",MUTED:"MUTED",SNOOZED:"SNOOZED",PMP_REPORTED:"PMP_REPORTED",EMAILED:"EMAILED",BULK_DOWNLOADED:"BULK_DOWNLOADED",FILTERED:"FILTERED",PUSHED:"PUSHED"},c={DESTINATION:"destination",EXPIRY:"expiry",SOURCE:"attributionsrc",SOURCE_EVENT_ID:"source_event_id",SOURCE_EVENT_TYPE:"source_event_type",PRIORITY:"priority",CLICK_PRIORITY:"2",VIEW_PRIORITY:"1",CAMPAIGN_ID:"campaign_id",ADVERTISER_ID:"advertiser_id"},h="604800",p="86400",m={ATTRIBUTION_SOURCE_ID:"attributionsourceid",ATTRIBUTE_DESTINATION:"attributiondestination",ATTRIBUTE_ON:"attributeon"},y="click",f="view"},263032:(e,t,i)=>{i.d(t,{YS:()=>n,eF:()=>o,m_:()=>s});var r=i(934378),a=i(953565);function s(e,t,i,a,s,n){let o=new URLSearchParams,l=e??"0",d=t.reduce((e,t)=>{if(null!=t){let i=function(e){let t;try{t=decodeURIComponent(e)}catch(i){t=e}t.startsWith("http")?t.startsWith("http://")&&(t=t.replace("http://","https://")):t="https://"+t;try{return new URL(t).origin}catch(r){let i=t.match(/^(https?:\/\/[^\/]+)(\/|$)/);if(i&&i.length>1)return i[1];return e}}(t);return e.add(i)}return e},new Set);return o.append(r.NR.SOURCE_EVENT_ID,l),o.append(r.NR.DESTINATION,JSON.stringify([...d])),o.append(r.NR.EXPIRY,i?r.uV:r.ug),o.append(r.NR.PRIORITY,i?r.NR.CLICK_PRIORITY:r.NR.VIEW_PRIORITY),s&&o.append(r.NR.ADVERTISER_ID,s),a&&o.append(r.NR.CAMPAIGN_ID,a),o.append(r.NR.SOURCE_EVENT_TYPE,i?r.bC:r.Cu),n?"https://www.pinterest.com/attribution_source/?"+o.toString():"/attribution_source/?"+o.toString()}async function n(e,t,i,r,n,o,l,d,u,c){let{appType:h,osType:p}=o||{};if(["Pin","pinImpressions"].includes(e)&&t&&(r||d||u)){(0,a.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"start",appType:h,osType:p}});try{if(!window.document.featurePolicy?.allowsFeature("attribution-reporting")){(0,a.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"skipped",message:"attribution-reporting is not enabled",appType:h,osType:p}});return}let e=s(i,[r,d,u],!1,n,l,c),t=await window.fetch(e,{keepalive:!0,attributionReporting:{eventSourceEligible:!0,triggerEligible:!1}});if(!t.ok)throw Error("server request failed.");(0,a.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"success",appType:h,osType:p}})}catch(e){(0,a.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"failed",error:e.name,message:e.message,appType:h,osType:p}})}}else(0,a.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"missing_param",appType:h,osType:p}})}function o(e){if(e){let t=e.toLowerCase();if(t.includes("windows"))return"windows xp"===t?1:"windows vista"===t?2:"windows 7"===t?3:"windows 8"===t?4:12;if(t.includes("mac os"))return 5;if(t.includes("android"))return 7;if(t.includes("ios"))return 6;if(t.includes("ubuntu"))return 8;if(t.includes("chromium os"))return 13}return 0}},86785:(e,t,i)=>{i.d(t,{G6:()=>s,i7:()=>n,oi:()=>r,u$:()=>a,un:()=>l,vU:()=>o});let r=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),a=e=>e?e.includes("Chrome")?r.CHROME:e.includes("Safari")?r.SAFARI:e.includes("Firefox")?r.FIREFOX:e.includes("Opera")?r.OPERA:e.includes("IE")?r.IE:e.includes("Edge")?r.EDGE:r.OTHER:r.OTHER;function s(e){return a(e)===r.SAFARI}function n(e){return a(e)===r.CHROME}function o(e){return a(e)===r.FIREFOX}function l(e){return a(e)===r.EDGE}},798580:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(624797);let a=/\/today\/(article|best|trending)\/[\w-]+\/(\d+)/,s=(e,t)=>t?e.substring(t.length).split("/")[0]:e,n=({boardUrl:e,path:t,pinId:i,pinnerUserName:n,search:o,storyPinDataId:l})=>{if(!t)return"";let d="";switch(t){case"/":case"/homefeed/":return"UserHomefeedResource";case n&&`/${n}/pins/`:return"UserPinsResource";case n&&`/${n}/`:case/\/_activity\//.test(t)&&t:return"UserActivityPinsResource";case/\/_created\//.test(t)&&t:return l?"UserStoryPinsFeedResource":"UserActivityPinsResource";case/\/_community\//.test(t)&&t:return"UserDiscoveredPinsResource";case/\/_saved\//.test(t)&&t:return"BoardlessPinsResource";case n&&`/${n}/_shopping_list/`:return"ShoppingListFeedResource";case/\/visual-search\//.test(t)&&t:return"VisualLiveSearchResource";case/\/pin\//.test(t)&&t:d="/pin/";let u=s(t,d);if(i!==u)return`RelatedPinFeedResource_${u}`;break;case/\/search\//.test(t)&&t:if(o){let e=(0,r.mB)(o,{shouldDecode:!1}).q||"";return`SearchResource_${e.toLowerCase()}`}break;case/\/categories\//.test(t)&&t:d="/categories/";let c=s(t,d);return`CategoryFeedResource_${c}`;case/\/discover\/topics\//.test(t)&&t:return"CategoryFeedResource";case/\/news_hub\//.test(t)&&t:d="/news_hub/";let h=s(t,d);return`NewsHubDetailsResource_${h}`;case/\/_tools\/more-ideas\//.test(t)&&t:return"BoardContentRecommendationResource";case/\/topics\//.test(t)&&t:d="/topics/";let p=s(t,d);return`TopicFeedResource_${p}`;case/\/source\//.test(t)&&t:d="/source/";let m=s(t,d);return`DomainFeedResource_${m}`;case/\/explore\//.test(t)&&t:d="/explore/";let y=s(t,d);return`SearchResource_${y}`;case e:case!!e&&/\/more_ideas\//.test(t)&&t:return"BoardFeedResource";case e&&t.indexOf(e)>-1&&t:return"BoardSectionPinsResource";case/\/brand_catalog\//.test(t)&&t:return"BrandCatalogFeedResource";case a.test(t)&&t:let f=t.match(a)?.[2]||"unknown";return`TodayArticleFeedResource_${f}`;case/\/today\//.test(t):return"TodayTabResource";case/\story_feed\//.test(t)&&t:if(o){let{feed_type:e,request_params:t}=(0,r.mB)(o);return`StoryFeedResource_${e}_${t}`}}return""},o=e=>{let t=e?.pathname;return t?(t.match(/\/search\//)&&e?.search&&(t+=e.search),t.toLowerCase()):""},l=({boardUrl:e,location:t,pinId:i,pinnerUserName:r,previousHistory:a,storyPinDataId:s,trackingParams:l,trackingParamsMap:d={}})=>{let u,c;if(!i||!l||!t)return;if(!d)return`${l??""}~0`;let{pathname:h,search:p}=t,m=n({boardUrl:e,path:h,pinId:i,pinnerUserName:r,search:p,storyPinDataId:s,trackingParams:l,trackingParamsMap:d}),y=Object.keys(d),f=(h||"").startsWith("/pin/");if(f){let e=y.find(e=>"PinResource"!==e);u=e?d[e]:d.PinResource}else u=d[m];if(!u&&a&&a.length){let t=o(a[a.length-1].location);c=n({boardUrl:e,path:t,pinId:i,pinnerUserName:r,search:p,storyPinDataId:s,trackingParams:l,trackingParamsMap:d}),u=d[c]}return u||(u=`${l||""}~0`),u}},259866:(e,t,i)=>{i.d(t,{Z:()=>r});function r(e){return function e(t,i){let r;if(null==t||"object"!=typeof t&&"function"!=typeof t)return t;let a=i.find(e=>e.value===t);if(a)return a.result;let s=Object.prototype.toString.call(t);switch(s){case"[object Array]":r=Array(t.length);break;case"[object Set]":r=new Set;break;case"[object Object]":case"[object Arguments]":r={};break;case"[object Map]":r=new Map;break;default:return t}let n=[...i,{value:t,result:r}];switch(s){case"[object Array]":t.forEach((t,i)=>{r[i]=e(t,n)});break;case"[object Set]":t.forEach(t=>{r.add(e(t,n))});break;case"[object Object]":case"[object Arguments]":Object.entries(t).forEach(([t,i])=>{r[t]=e(i,n)});break;case"[object Map]":t.forEach((t,i)=>{r.set(i,e(t,n))})}return r}(e,[])}},214877:(e,t,i)=>{i.d(t,{B:()=>l,v:()=>o});var r=i(525364),a=i(342513),s=i(785893);let{Provider:n,useHook:o}=(0,a.Z)("ContextLogger");function l({children:e,value:t}){let{setViewContextData:i}=(0,r.sV)();return t.injectSetViewContextDataFromHook=i,(0,s.jsx)(n,{value:t,children:e})}},587703:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(214877);let a=()=>(0,r.v)().logContextEvent},696534:(e,t,i)=>{i.d(t,{F6:()=>c,Hs:()=>u,Yc:()=>l,vs:()=>d});var r=i(667294),a=i(191313),s=i(217058);let n="theme",o="dark"===(0,a.qn)(n),l=()=>o;function d(){let[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{t(l())},[t]),e}let u=()=>{(0,a.Nh)(n,"dark"),(0,s.My)("mweb.dark_mode.enable"),window.location.reload()},c=()=>{(0,a.L_)(n),(0,s.My)("mweb.dark_mode.disable"),window.location.reload()}},135839:(e,t,i)=>{i.d(t,{Z:()=>s,k:()=>r});let r={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year"},a=function(e){switch(e){case r.YEAR:return{year:"numeric"};case r.LONG:return{year:"numeric",month:"long",day:"numeric"};case r.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case r.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case r.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case r.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case r.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case r.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case r.MONTH_DAY:return{month:"long",day:"numeric"};case r.SHORT_MONTH:return{month:"short"};case r.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case r.DAY:return{day:"numeric"};case r.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case r.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case r.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case r.TIME:return{hour:"numeric",minute:"2-digit"};case r.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case r.HOUR:return{hour:"numeric"};default:throw Error('invalid dateFormatType "'+e+'"')}};function s(e,t,i,r=!0){let s=a(i);r&&(s.timeZone="UTC");let n=new Intl.DateTimeFormat(e,s);return n.format(t)}},419075:(e,t,i)=>{i.d(t,{Z:()=>r});function r(e){let t=Math.round(e/1e3),i=t%60;return Math.floor(t/60)+":"+(i<10?"0":"")+i}},541841:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(667294),a=i(973935);function s(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class n extends r.Component{constructor(...e){super(...e),s(this,"observer",null),s(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){let e=a.findDOMNode(this);e instanceof HTMLElement&&(this.node=e),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.node),delete this.observer)}render(){return r.Children.only(this.props.children)}}let o=n},103322:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(667294),a=i(701785),s=i(953565);function n(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class o extends r.Component{constructor(...e){super(...e),n(this,"state",{error:null,info:null}),n(this,"resetError",()=>{this.setState({error:null,info:null})})}componentDidCatch(e,t){try{let{name:t}=this.props,i=this.props.type||"secondary";(0,a.T)({extraData:e.extraData??{},errorBoundary:t,errorBoundaryType:i,message:e.message,name:e.name,stack:e.stack}),(0,s.nP)("react.error_boundary",{sampleRate:.1,tags:{component:void 0,name:this.props.name}})}catch(e){(0,s.nP)("react.error_boundary.error",{sampleRate:1,tags:{name:this.props.name}})}this.setState({error:e,info:t})}render(){let{renderErrorState:e}=this.props,{error:t,info:i}=this.state;return t&&i?e?e({error:t,info:i,resetError:this.resetError}):null:this.props.children}}},510989:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(103322);let a=r.Z},401429:(e,t,i)=>{i.d(t,{Z:()=>y});var r=i(667294),a=i(702664),s=i(587703),n=i(25919),o=i(216167);let l=(e,t,i,r)=>(a,s)=>l=>{if(a&&a.id){let d=o.Z.create(e,{placed_experience_id:a.id,extra_context:{}});switch(t){case"dismissed":d.callDelete().then(()=>{l((0,n.fO)()),i&&r&&i({event_type:r,object_id_str:a.id.toString()})});break;case"completed":d.callUpdate().then(()=>{s||l((0,n.fO)()),i&&r&&i({event_type:r,object_id_str:a.id.toString()})});break;case"viewed":d.callUpdate().then(()=>{i&&r&&i({event_type:r,object_id_str:a.id.toString()})})}}},d=e=>l("UserExperienceCompletedResource","completed",e,6567),u=l("UserExperienceResource","dismissed"),c=e=>l("UserExperienceViewedResource","viewed",e,4503);var h=i(785893);function p(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class m extends r.Component{constructor(...e){super(...e),p(this,"state",{hasCompleted:[],hasDismissed:[]}),p(this,"view",()=>{let{experience:e,isBackendExperience:t,targeting:i,viewExperience:r,viewExperienceObject:a}=this.props;e&&"viewed"!==e.status&&(t?(e.status="viewed",a(e)):i?r(e.placement_id,e.experience_id,i):r(e.placement_id,e.experience_id))}),p(this,"complete",e=>{let{completeExperience:t,completeExperienceObject:i,experience:r,isBackendExperience:a,preventRemoval:s,targeting:n}=this.props,o=e||1;if(r&&!this.state.hasCompleted.includes(r.experience_id)){let{placement_id:e,experience_id:l}=r||{},d=s||2===o;(1===o||d)&&e&&l&&(a?i(r,d):n?t(e,l,d,n):t(e,l,d),this.setState(e=>({hasCompleted:[...e.hasCompleted,l]})))}}),p(this,"dismiss",()=>{let{dismissExperience:e,dismissExperienceObject:t,experience:i,isBackendExperience:r,preventRemoval:a,targeting:s}=this.props,{placement_id:n,experience_id:o}=i||{};i&&!this.state.hasDismissed.includes(o)&&(r?t(i):s?e(n,o,!!a,s):e(n,o,!!a),this.setState(e=>({hasDismissed:[...e.hasDismissed,o]})))}),p(this,"isEligibleExperience",()=>{let{experience:e}=this.props;if(!e)return!1;let{eligibleIds:t,eligibleTypes:i,predicate:r,transitionType:a}=this.props,{experience_id:s,type:n}=e;return t&&t.length?t.includes(s):i&&i.length?i.includes(n):r?r(e):!a||a===n})}componentDidMount(){if(this.props.disableAutoView)return;let{experience:e}=this.props;e&&this.isEligibleExperience()&&this.view()}componentDidUpdate(e){if(this.props.disableAutoView)return;let t=e.experience,i=this.props.experience;i&&this.isEligibleExperience()&&(t&&t.experience_id===i.experience_id||this.view())}render(){let{children:e,experience:t,disableAutoView:i}=this.props;return t&&this.isEligibleExperience()?"function"==typeof e?e({experience:t,complete:this.complete,dismiss:this.dismiss,...i?{view:this.view}:Object.freeze({})}):r.Children.only(e):null}}function y(e){let t=(0,a.useSelector)(({experiences:t})=>e.experience||(e.placementId?t[e.placementId]:void 0)),i=(0,a.useDispatch)(),r=(0,n.be)(),o=(0,n.Am)(),l=(0,n.Ig)(),p=(0,s.Z)();return(0,h.jsx)(m,{...e,completeExperience:(e,t,a,s)=>i(r(e,t,a,!1,{},s)),completeExperienceObject:(e,t)=>i(d(p)(e,t)),dismissExperience:(e,t,r,a)=>i(o(e,t,r,void 0,a)),dismissExperienceObject:e=>i(u(e)),experience:t,viewExperience:(e,t,r)=>i(l(e,t,!1,!1,void 0,r)),viewExperienceObject:e=>i(c(p)(e))})}p(m,"defaultProps",{eligibleIds:[],eligibleTypes:[]})},619370:(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var r=i(667294),a=i(883119),s=i(401429),n=i(785893);function o(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l extends r.PureComponent{constructor(...e){super(...e),o(this,"onScroll",()=>{let{dismiss:e}=this.props;this.dismissed||this.timer||(this.timer=setTimeout(()=>{e(),this.dismissed=!0,this.timer=void 0},3e3))}),o(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){let{anchor:e,text:t,thumbnails:i,idealDirection:r}=this.props,s=i.slice(-3);return(0,n.jsx)(a.J2,{anchor:e,color:"white",idealDirection:r,onDismiss:this.onScroll,shouldFocus:!1,size:"md",children:(0,n.jsxs)(a.xu,{alignContent:"center",display:"flex",justifyContent:"between",padding:3,width:"100%",children:[(0,n.jsx)(a.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3,children:(0,n.jsx)(a.xv,{color:"default",weight:"bold",children:t})}),(0,n.jsx)(a.xu,{display:"flex",marginEnd:-2,paddingX:2,children:s.map(e=>(0,n.jsx)(a.xu,{height:60,paddingX:1,width:50,children:(0,n.jsx)(a.zd,{height:60,rounding:2,children:(0,n.jsx)(a.Ee,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:60,naturalWidth:60,src:e})})},e))})]})})}}var d=i(76561);function u(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends r.Component{constructor(...e){super(...e),u(this,"dismissRef",(0,r.createRef)()),u(this,"state",{paused:!1}),u(this,"dismissCb",()=>{this.dismissRef.current?.()}),u(this,"handlePulsarClick",(e,t)=>{e?this.setState({paused:!0}):t()})}componentWillUnmount(){let{anchor:e}=this.props;clearTimeout(this.timer),e?.removeEventListener("click",this.dismissCb)}setDefaultPulsarTooltip(e){e.has_pulsar=null==e.has_pulsar||e.has_pulsar,e.has_tooltip=null==e.has_tooltip||e.has_tooltip}getText(e,t,i){return(t&&e.text.replace("{boardName}",t),i)?i(e):e.text}render(){let{anchor:e,customWrapper:t,experienceIds:i,boardTextOverride:o,flyoutSize:u,fontSize:c,hasFullWidthButton:h=!0,idealDirection:p,useMasonryFlyout:m,noClickToDismiss:y,onClickComplete:f,onClickDismiss:S,placementId:v,positionRelativeToAnchor:b,shouldSeeReturnToHomeFeedTooltipEdu:E=!1,shouldTimeoutDismiss:g,showCaret:_,textAlign:P,textOverflow:T,textOverrideFn:R,textWeight:I,customizedComplete:D,pulsarZIndex:w,advertiserId:A,dismissButtonLocation:O,dismissButtonColor:C,dismissButtonMarginTop:k}=this.props,x=t||(({children:e})=>m?(0,n.jsx)(a.mh,{children:e}):e);return(0,n.jsx)(s.Z,{eligibleIds:i,eligibleTypes:[8],placementId:v,targeting:A?{advertiserId:parseInt(A,10)}:null,children:({complete:t,dismiss:i,experience:s})=>{let{display_data:{scroll_to_dismiss:v,scroll_to_dismiss_delay_in_seconds:A=0,...N}}=s,L=v&&e,M=()=>{V(),this.timer||(this.timer=setTimeout(i,1e3*A))},V=()=>{L&&(window.removeEventListener("scroll",M),window.removeEventListener("touchmove",M))},U=()=>{V(),t()};if(L&&(window.addEventListener("scroll",M),window.addEventListener("touchmove",M)),this.setDefaultPulsarTooltip(N),!N.has_pulsar&&!N.has_tooltip)return U(),null;g&&N.disappearTime&&N.disappearTime>0&&(this.timer=setTimeout(()=>(M(),null),N.disappearTime));let H=501041===s.experience_id||505086===s.experience_id;return N.has_tooltip&&!N.has_pulsar&&(this.dismissRef.current=M,e?.addEventListener("click",this.dismissCb)),(0,n.jsxs)(r.Fragment,{children:[N.has_pulsar&&(0,n.jsx)(d.Z,{anchor:e,leftOverride:H?342:void 0,onTouch:()=>this.handlePulsarClick(N.has_tooltip,U),paused:this.state.paused,topOverride:H?-5:void 0,zIndex:w&&w.index()}),N.has_tooltip&&(!N.has_pulsar||this.state.paused)&&(N.thumbnail_urls?(0,n.jsx)(l,{anchor:e,dismiss:M,idealDirection:p||"down",text:N.text,thumbnails:N.thumbnail_urls}):(0,n.jsx)(x,{children:(0,n.jsx)(a.J2,{_deprecatedShowCaret:_,anchor:e,color:"deprecatedBlue",idealDirection:p||"down",onDismiss:y?()=>{}:M,positionRelativeToAnchor:!m&&b,shouldFocus:!1,size:u,children:(0,n.jsxs)(a.xu,{column:12,paddingX:E?5:3,paddingY:3,children:[(0,n.jsxs)(a.xv,{align:"right"===P?"end":P,color:"inverse",overflow:T,size:c,weight:I||"bold",children:[this.getText(N,o,R),N.secondary_cta_link&&(0,n.jsx)(a.xu,{display:"inlineBlock",marginStart:1,children:(0,n.jsx)(a.xv,{color:"inverse",size:c,weight:"bold",children:(0,n.jsx)(a.rU,{display:"inlineBlock",href:N.secondary_cta_link.url,target:"blank",underline:"hover",children:N.secondary_cta_link.text})})})]}),N.sub_text&&(0,n.jsx)(a.xu,{paddingY:2,children:(0,n.jsx)(a.xv,{color:"inverse",size:c,children:N.sub_text})}),(N.dismiss_button_text||N.complete_button_text)&&(0,n.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:O||"start",marginTop:k||2,children:[N.dismiss_button_text&&(0,n.jsx)(a.xu,{column:6,marginEnd:1,children:(0,n.jsx)(a.zx,{color:C||"blue",fullWidth:h,onClick:()=>{S&&S(),M()},size:"md",text:N.dismiss_button_text})}),N.complete_button_text&&(0,n.jsx)(a.xu,{column:N.dismiss_button_text?6:12,children:D?(0,n.jsx)(a.iP,{fullHeight:!0,onTap:()=>{U(),f&&f()},rounding:2,children:(0,n.jsx)(a.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"10px"}},display:"flex",justifyContent:"center",padding:2,rounding:2,children:(0,n.jsx)(a.xv,{color:"shopping",weight:"bold",children:N.complete_button_text})})}):(0,n.jsxs)(a.kC,{justifyContent:"center",children:[N.complete_button_cta_url&&(0,n.jsx)(a.ZP,{color:"white",fullWidth:h,href:N.complete_button_cta_url,onClick:({event:e})=>{e.preventDefault(),e.stopPropagation(),U(),f&&f()},size:"md",target:N.complete_button_cta_url?"blank":null,text:N.complete_button_text}),!N.complete_button_cta_url&&(0,n.jsx)(a.zx,{color:"white",fullWidth:h,onClick:()=>{U(),f&&f()},size:"md",text:N.complete_button_text})]})})]})]})})}))]})}})}}u(c,"defaultProps",{fontSize:"300",positionRelativeToAnchor:!0})},25919:(e,t,i)=>{let r;i.d(t,{Am:()=>S,Ig:()=>y,N:()=>g,Sd:()=>v,YX:()=>E,be:()=>f,fO:()=>h,kd:()=>b,pz:()=>p});var a=i(667294),s=i(216167),n=i(587703),o=i(703404),l=i(957753),d=i(107366),u=i(953565);let c=(e,t,i={})=>(0,u.nP)(`${e}.${t}`,{sampleRate:1,tags:i}),h=(e,t)=>i=>{let r=t?{extra_context:e,targeting:t}:{extra_context:e};return s.Z.create("UserExperiencePlatformResource",r).callGet().then(e=>e.resource_response?i((0,l.OD)(e.resource_response.data)):void 0)},p=(e,t,i,a)=>(n,d)=>{if(t)return Promise.resolve();if(a&&(r=a),1===e.length){let t=e[0],r=d().experiences,a=r[t],s=a?.extraContext||null;if(JSON.stringify(s)===JSON.stringify(i)||(0,o.E3)(a)&&!(i&&Object.keys(i).length>0))return Promise.resolve()}return s.Z.create("UserExperienceResource",{placement_ids:e,extra_context:i||null,targeting:a}).callGet().then(e=>e.resource_response?n((0,l.cL)(e.resource_response.data)):void 0)},m=(e,t,i,a)=>(n,o,d,u=!1,c,p)=>(m,y)=>{let{experiences:f,experiencesMulti:S}=y(),v=null,b=!0;if(u||(v=(b=f[n]&&f[n].experience_id===o)?f[n]:Array.isArray(S[n])&&S[n]?.find(e=>e.experience_id===o)),v&&v.experience_id===o||u&&n&&o){let u=s.Z.create(e,{placed_experience_id:`${n}%3A${o}`,extra_context:c??{},targeting:p}),y=b?l.Yb:l.xW;switch(t){case"dismissed":return u.callDelete().then(()=>{m(y(n,o,t)),m(h(void 0,r)),i&&a&&i({event_type:a,object_id_str:o.toString()})});case"completed":return u.callUpdate().then(()=>{!d&&(m(y(n,o,t)),m(h(void 0,r)),i&&a&&i({event_type:a,object_id_str:o.toString()}))});case"viewed":return m(y(n,o,t)),u.callUpdate().then(()=>{1000162===n&&m(h()),i&&a&&i({event_type:a,object_id_str:o.toString()})});case"completedWithoutHomefeed":return u.callUpdate().then(()=>{d||m(y(n,o,t)),i&&a&&i({event_type:a,object_id_str:o.toString()})})}}return Promise.resolve()},y=()=>{let e=(0,n.Z)(),t=(0,a.useCallback)(m("UserExperienceViewedResource","viewed",e,4503),[e]);return t},f=()=>{let e=(0,n.Z)(),t=(0,a.useCallback)(m("UserExperienceCompletedResource","completed",e,6567),[e]);return t},S=()=>{let e=(0,n.Z)(),t=(0,a.useCallback)(m("UserExperienceResource","dismissed",e,6568),[e]);return t},v=()=>{let e=(0,n.Z)(),t=(0,a.useCallback)(m("UserExperienceCompletedResource","completedWithoutHomefeed",e,6567),[e]);return t},b=(e,t)=>(i,r)=>{let{experiences:a}=r(),s=a[e];s&&s.triggerable_placed_exps&&s.triggerable_placed_exps.length&&s.triggerable_placed_exps.forEach(i=>{let[,r]=i.split(":"),a=t;s.metadata&&s.metadata[r]&&(a={...t,...s.metadata[r]}),(0,d.Z)({url:`/v3/experiences/${i.replace(":","%3A")}/trigger/`,method:"PUT",data:a?{extra_context:JSON.stringify(a,null,1)}:{}}).then(()=>{c("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:r})})})},E=e=>(t,i)=>{t(b(e));let{experiences:r}=i();return r[e]},g=(e,t,i)=>a=>{i&&(r=i),a(b(e,t)),t&&Object.keys(t).length>0&&a(p([e],!1,t,i))}},703404:(e,t,i)=>{i.d(t,{A0:()=>l,E3:()=>n,MQ:()=>o,fL:()=>d});var r=i(883119),a=i(862249),s=i(785893);function n(e){return!!e&&0!==e.type}let o=(e,t,i)=>{let r=e[i];return t[i]&&n(r)?r:null};function l(e){return e.display_data?.anchor}let d=e=>{let t=new DOMParser,i=t.parseFromString(e,"text/html"),n=[...i.body?.childNodes||[]].map(e=>{if("A"!==e.nodeName)return(0,s.jsx)(r.xv,{inline:!0,children:e.textContent});{let t=e.href||"",i=(0,a.Z)({url:t});return(0,s.jsx)(r.rU,{display:"inline",externalLinkIcon:i?"default":"none",href:t,rel:i?"nofollow":"none",target:"blank",children:e.textContent})}});return(0,s.jsx)(r.xv,{inline:!0,children:n})}},26616:(e,t,i)=>{i.d(t,{$S:()=>r,V$:()=>a,_4:()=>n,iY:()=>o,mR:()=>s});let r="REFRESH_ALL_EXPERIENCES_MULTI",a="UPDATE_EXPERIENCE_MULTI",s="FETCH_EXPERIENCES",n="REFRESH_ALL_EXPERIENCES",o="UPDATE_EXPERIENCE"},957753:(e,t,i)=>{i.d(t,{NW:()=>o,OD:()=>d,Yb:()=>l,cL:()=>u,xW:()=>n});var r=i(216167),a=i(26616);let s=e=>({type:a.$S,payload:{experiencesMulti:e}}),n=(e,t,i)=>({type:a.V$,payload:{placementId:e,experienceId:t,status:i}}),o=e=>t=>r.Z.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then(e=>e.resource_response?t(s(e.resource_response.data)):void 0),l=(e,t,i)=>({type:a.iY,payload:{placementId:e,experienceId:t,status:i}}),d=e=>({type:a._4,payload:{experiences:e}}),u=e=>({type:a.mR,payload:{experiences:e}})},76561:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(883119),a=i(667294),s=i(785893);let n=(e,t,i,r)=>({horizontalOffset:-(r/2-t/2),verticalOffset:-(i/2-e/2)});function o({anchor:e,children:t,zIndex:i,leftOverride:o,topOverride:l}){let d=(0,a.useRef)(null),[u,c]=(0,a.useState)(0),[h,p]=(0,a.useState)(0),{height:m,width:y}=e.getBoundingClientRect();return(0,a.useEffect)(()=>{let{current:t}=d;if(e&&t){let{height:e,width:i}=t.getBoundingClientRect(),{horizontalOffset:r,verticalOffset:a}=n(m,y,e,i);c(r),p(a)}}),(0,s.jsx)(r.xu,{ref:d,dangerouslySetInlineStyle:{__style:{left:o||u,top:l||h}},"data-test-id":"center-box",position:"absolute",zIndex:i?new r.Ry(i):void 0,children:t})}let l=function(e){let{anchor:t,leftOverride:i,onTouch:a,onMouseEnter:n,paused:l,size:d,topOverride:u,zIndex:c}=e;return t?(0,s.jsx)(o,{anchor:t,leftOverride:i,topOverride:u,zIndex:c,children:(0,s.jsx)(r.iP,{fullWidth:!1,onMouseEnter:n,onTap:({event:e})=>a(e),rounding:"circle",children:(0,s.jsx)(r.o3,{paused:l,size:d})})}):null}},930837:(e,t,i)=>{i.d(t,{ZP:()=>d,b7:()=>n.b7,bN:()=>o,p4:()=>l});var r=i(240684),a=i(554786),s=i(785893),n=i(844683);let o=(0,r.ZP)({resolved:{},chunkName:()=>"DesktopModal",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(51879).then(i.bind(i,980536)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>980536}),l=(0,r.ZP)({resolved:{},chunkName:()=>"MobileModal",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(72430).then(i.bind(i,119936)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>119936});function d(e){let t=(0,a.ZP)(),i=void 0===e.isOpen||e.isOpen;if("desktop"===t&&i){let{isOpen:t,mobileAccessibilityCloseIconLabel:i,mobileAllowScroll:r,mobileHideCloseIcon:a,mobileIsFullscreen:n,mobileIsSlideUp:l,type:d,mobileIsFooter:u,zIndex:c,...h}=e;return(0,s.jsx)(o,{...h})}let{allowMediaPlay:r,allowScroll:n,role:d,size:u,_dangerouslyDisableScrollBoundaryContainer:c,...h}=e;return(0,s.jsx)(l,{...h,isOpen:i})}},844683:(e,t,i)=>{i.d(t,{JN:()=>d,Vf:()=>u,ZM:()=>o,b7:()=>n,i_:()=>l});var r=i(883119),a=i(696534),s=i(69979);let n=new r.Ry(1e3),o=new r.H3([s.Z]),l=12,d=({variant:e})=>({__style:"fullscreen"===e?{touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"90vw",height:"70vh",borderRadius:"8px",zIndex:1,left:"5vw",bottom:"13vh",overflowY:"hidden"}:"tablet"===e?{border:void 0,borderRadius:"32px",top:"50%",left:"50%",minWidth:"350px",touchAction:"none",transform:"translate(-50%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1}:"footer"===e?{border:(0,a.Yc)()?void 0:"1px solid #efefef",bottom:0,boxShadow:"0 0 16px rgba(0,0,0, 0.16)",left:0,touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1}:"signup"===e?{border:void 0,borderRadius:"32px",top:"50%",touchAction:"none",transform:"translate(0%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1,left:"8px",right:"8px",background:"#FFFFFF"}:{border:(0,a.Yc)()?void 0:"1px solid #efefef",touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1,left:"0px",bottom:0,boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",overflow:"hidden",borderRadius:"32px 32px 0 0"}}),u=({isFullscreen:e,isTablet:t,isShowing:i,isRelatedInterestsModal:r})=>{let s={border:(0,a.Yc)()?void 0:"1px solid #efefef",touchAction:"none",width:"100vw",height:"",zIndex:1,left:0,bottom:0,borderRadius:"32px 32px 0px 0px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)"},n=i?"translateY(0)":"translateY(100vh)";return s.height=e?"100vh":"",t&&r&&(s={...s,width:425,left:"50%",transform:"translateX(-50%)"},n=i?"translate(-50%, 0)":"translate(-50%, 100vh)"),{__style:{...s,transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",transform:n}}}},454514:(e,t,i)=>{i.d(t,{UZ:()=>d,Vg:()=>l,ZP:()=>u});var r=i(667294),a=i(883119),s=i(554786),n=i(494125),o=i(785893);let l=200,d=({deviceType:e,hiding:t,visible:i})=>{let r="desktop"===e,a=0,s=r?"translateY(200px)":"translateY(-200px)",n="opacity 0.1s ease-in-out",o="hidden";return i&&!t&&(a=1,s="translateY(0)",n="all 0.7s cubic-bezier(.19, 1.15, .48, 1)",o="visible"),i&&t&&(s="scale(1.1)",n="opacity transform 0.2s"),{opacity:a,pointerEvents:"auto",position:"relative",marginTop:r?10:0,transform:s,transition:n,visibility:o}};function u({_dangerouslySetThumbnail:e,_dangerouslySetPrimaryAction:t,text:i,primaryAction:u,dismissButton:c,helperLink:h,thumbnail:p,type:m,dataTestId:y,duration:f=2e3,onHide:S,href:v,onClick:b,openNewPage:E,imageUrl:g}){let _;let P=(0,s.ZP)(),[T,R]=(0,r.useState)(!1),[I,D]=(0,r.useState)(!1),w=(0,r.useRef)(),A=()=>{R(!0),w.current=setTimeout(S,l)},O=()=>{w.current=setTimeout(A,f)},C=()=>{w.current&&clearTimeout(w.current)};(0,n.Z)(()=>(setTimeout(()=>D(!0),100),O(),C)),g&&(_={image:(0,o.jsx)(a.Ee,{alt:"string"==typeof i?i:`${i[0]} ${i[1]}`,fit:"cover",naturalHeight:1,naturalWidth:1,src:g})});let k=(0,o.jsx)(a.FN,{_dangerouslySetPrimaryAction:t,_dangerouslySetThumbnail:e,dismissButton:c,helperLink:h,primaryAction:u,text:i,thumbnail:_??p,type:m}),{marginTop:x,opacity:N,pointerEvents:L,position:M,transform:V,transition:U,visibility:H}=d({deviceType:P,hiding:T,visible:I});return(0,o.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{transform:V,transition:U,visibility:H,pointerEvents:L}},"data-test-id":y??"toast",display:"flex",marginTop:x,onMouseEnter:C,onMouseLeave:O,opacity:N,position:M,children:v?(0,o.jsx)(a.Tg,{href:v,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{v.startsWith("#")&&(e.preventDefault(),t()),b?.(e)},rounding:"pill",target:E?"blank":null,children:k}):k})}},205841:(e,t,i)=>{i.d(t,{qE:()=>o,u_:()=>l.ZP});var r=i(883119),a=i(785893);let s=(e,t)=>{let i=e?.includes("images/user/default");return!!(i&&t)};function n({accessibilityLabel:e,name:t,outline:i,size:n,src:o,verified:l}){return(0,a.jsx)(r.qE,{accessibilityLabel:e,name:t,outline:i,size:n,src:s(o,t)?void 0:o,verified:l})}n.displayName="Avatar";let o=n;var l=i(930837);i(454514)},388769:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(72461),a=i(5859),s=i(785893);let n=({currency:e,maximumFractionDigits:t,minimumFractionDigits:i,shortform:n,shortformMaximumFractionDigits:o,formatStyle:l,uplimit:d,value:u})=>{let c=(0,r.Z)();return(0,s.jsx)(a.LC,{children:r=>c(r.locale||"en-US",u,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:i,shortform:n,shortform_maximum_fraction_digits:o,style:l,uplimit:d})})}},140017:(e,t,i)=>{i.d(t,{ZP:()=>o,oz:()=>s,q6:()=>a});var r=i(342513);let{Provider:a,Consumer:s,useHook:n}=(0,r.Z)("i18n"),o=n},72461:(e,t,i)=>{i.d(t,{Z:()=>d});var r=i(140017),a=i(427514);let s=(e,t)=>{let i=t||0,r=10**i,a=+(i?e*r:e).toFixed(8),s=Math.floor(a),n=a-s,o=n>.49999999&&n<.50000001?s%2==0?s:s+1:Math.round(a);return i?o/r:o},n=({maximumFractionDigits:e,minimumFractionDigits:t,style:i,currency:r})=>{let a={maximumFractionDigits:e,minimumFractionDigits:t};return i?{...a,style:i,..."currency"===i?{currency:r,currencyDisplay:"symbol"}:{}}:a},o=e=>{try{0..toLocaleString([e])}catch(e){return!1}return!0},l=(e,t)=>{if(t){let{minimumFractionDigits:i,maximumFractionDigits:r}=new Intl.NumberFormat(e,{style:"currency",currency:t}).resolvedOptions();if(void 0!==i&&void 0!==r)return{minimumFractionDigits:i,maximumFractionDigits:r}}return{minimumFractionDigits:2,maximumFractionDigits:2}};function d(){let e=(0,r.ZP)();return(t,i,r)=>{let d=0,u=0,c=r&&r.style||void 0,h=r&&r.shortform||!1,p=r&&r.uplimit||void 0,m=r&&r.currency||void 0,y=!!p&&i>=p,f=p&&y?p:i;if("currency"===c){let{minimumFractionDigits:e,maximumFractionDigits:i}=l(t,m);d=void 0===r||void 0===r.maximum_fraction_digits?i:r.maximum_fraction_digits,u=void 0===r||void 0===r.minimum_fraction_digits?e:r.minimum_fraction_digits}else d=void 0===r||void 0===r.maximum_fraction_digits?0:r.maximum_fraction_digits,u=void 0===r||void 0===r.minimum_fraction_digits?0:r.minimum_fraction_digits;if(h&&f>999&&(d=void 0===r||void 0===r.shortform_maximum_fraction_digits?2:r.shortform_maximum_fraction_digits,u=0),d<u)return String(f);let S=f,v="",b=[{"100M":{value:1e8,localeKey:e._('億', 'Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.', 'Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.')}},{"10k":{value:1e4,localeKey:e._('万', 'Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.', 'Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.')}}],E=[{b:{value:1e9,localeKey:e._('B', 'Abbreviation for one billion.', 'Abbreviation for one billion.')}},{m:{value:1e6,localeKey:e._('M', 'Abbreviation for one million.', 'Abbreviation for one million.')}},{k:{value:1e3,localeKey:e._('k', 'Abbreviation for one thousand.', 'Abbreviation for one thousand.')}}],g=/^zh|ja|ko/.test(t);if(h&&f>999){let e=g?b:E;for(let t=0;t<e.length;t+=1){let i=Object.keys(e[t])[0],r=e[t][i].value;if(f>=r){S=s(f/r*Math.pow(10,d))/Math.pow(10,d),v=e[t][i].localeKey;break}}}if(null==S)return"";let _=S.toLocaleString([o(t)&&"ar-SA"!==t?t:"en-US"],n({maximumFractionDigits:d,minimumFractionDigits:u,currency:m,style:c}));return v&&v.length>0?(0,a.Z)(e._('{{formattedNumber}}{{numberSuffix}}', 'i18n.usePrettyNumberFormat.prettyNumberFormat', 'String used to concatenate formatted number and localized number suffix'),{formattedNumber:_,numberSuffix:v})+(y?"+":""):_+(y?"+":"")}}},666472:(e,t,i)=>{i.d(t,{F:()=>u,Z:()=>d});var r=i(667294),a=i(263032),s=i(214877),n=i(30378),o=i(369708);let l={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054}};function d({carouselData:e,closeupImpressionType:t,closeupNavigationType:i,componentType:d,contextLogData:u,clientTrackingParams:c,elementType:h,impressionAuxFields:p,inImpressionExp:m,impressionType:y,impressionsFramework:f,isPaused:S,loggingId:v,objectIdStr:b,slotIndex:E,trackCarousel:g,viewData:_,viewParameter:P,viewType:T,isPromoted:R,storyPinProductEventData:I,pinData:D}){let{logContextEvent:w}=(0,s.v)(),{logMrcVideoAdEventOnPlay:A}=(0,o.rG)(),O=f||n.Z,C=(0,r.useRef)(null),k=r=>{let s=l[y],n=s.idType,o={clientTrackingParams:c,endTime:r.endTime,[n]:v,slotIndex:E,time:r.startTime,renderDuration:r.endTime-r.startTime,type:t,...p,forcedExit:"removed"===r.forcedExit?0:void 0},m={};if("Pin"===y&&(o={...o,pinCellWidth:C.current?.getBoundingClientRect().width||0,pinCellHeight:C.current?.getBoundingClientRect().height||0,windowWidth:window?.innerWidth,windowHeight:window?.innerHeight},p?.chromeAraViewExp&&D&&D.isPromoted)){let{attributionSourceId:e}=D;(0,a.YS)(y,D.isPromoted??null,e??null,D.link??null,D.campaignId??null,p.araAuxData??null,D.advertiserId??null,D.domain??null,D.adDestinationUrl??null,p?.araHardcodedReportingUrlExp),m={is_arapi:!0,attribution_source_id:e||""}}let f={component:d,object_id_str:b,view_type:T,view_data:_||{},view_parameter:P};if(g)e&&g&&w({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...o,..."canonical"===e.type?{carouselDataId:Number(e.carouselId??0),slotIndex:e.index,carouselSlotId:e.carouselSlots?.[e.index??0]&&Number(e.carouselSlots[e.index??0].slotId)}:{carouselDataId:Number(e.id??0),carouselSlotId:e.carousel_slots?.[e.index??0]&&Number(e.carousel_slots[e.index??0].id),slotIndex:e.index}}]},...f,aux_data:{...u,...m}});else{let e={clientTrackingParams:c,event_type:s.eventType,...f,element:h,event_data:{[s.impressionType]:"Story"===y?o:[o],...I?{storyPinProductEventData:I}:{}},aux_data:{closeup_navigation_type:i,...u,...m}};w(e),A(e)}},x=(0,r.useCallback)(()=>{try{let{current:e}=C;e instanceof HTMLElement&&(!R||e.getElementsByTagName("img").length>0)&&O.start(e).onExitViewport(k).setDebugId(v||"unknown")}catch{window.console.error('Can only track impressions for type "HTMLElement"')}},[C.current]);return(0,r.useEffect)(()=>(m&&!O.inExperiment&&O.setExperimentStatus(!0),S||x(),()=>{let{current:e}=C;e instanceof HTMLElement&&(!R||e.getElementsByTagName("img").length>0)&&O.stop(e)}),[S,x]),C}let u=({children:e,...t})=>e({impressionTrackerRef:d(t)})},307772:(e,t,i)=>{function r(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z3:()=>c,LU:()=>h,ZP:()=>p});let a=window.location.search.includes("debug_impressions=1")||document.cookie&&document.cookie.indexOf("debug_impressions=1")>-1,s={paused:"Pause",resumed:"Resume",stopped:"Flush",enter:"Enter viewport",exit:"Exit viewport"},n={},o={background:"#FF8A8A",transform:"scale(.98)"},l={init:e=>({transform:`scale(${n[e]?.8:.99})`,transition:"transform .2s ease-in-out",background:"#8E8E8E"}),[s.enter]:{background:"#A0DCC8",transform:"scale(.99)"},[s.exit]:o,[s.stopped]:o,[s.paused]:o,[s.resumed]:{background:"#0FA573",transform:"scale(.99)"}};class d{constructor(e){r(this,"setMutationObserver",e=>(this.mutationObserver=e,this)),r(this,"startMutationObserver",e=>{this.mutationObserver&&this.mutationObserver.observe(this.node,e)}),r(this,"stopMutationObserver",()=>{this.mutationObserver&&this.mutationObserver.disconnect()}),r(this,"handleIntersectionChange",e=>{let t=e.intersectionRatio>0||e.isIntersecting;if(t&&!this.inViewport){let e=Date.now();this.startTime=e,this._debug(s.enter,{startTime:e,node:this.node}),this.enterCallbacks.forEach(e=>e())}else!t&&this.inViewport&&(this._debug(s.exit,!0),this.exitCallbacks.forEach(e=>e(this.toJSON())));this.inViewport=t}),this.enterCallbacks=[],this.exitCallbacks=[],this.inViewport=!1,this.node=e,this.startTime=0,this.debugId=""}onEnterViewport(e){return this.enterCallbacks.push(e),this}onExitViewport(e){return this.exitCallbacks.push(e),this}setDebugId(e){return this.debugId=e,a&&Object.assign(this.node.style,l.init(e)),this}pause(){return this.inViewport&&(this._debug(s.paused,!0),this.exitCallbacks.forEach(e=>e(this.toJSON()))),this}resume(){if(this.inViewport){let e=Date.now();this._debug(s.resumed,{startTime:e}),this.startTime=e}return this}stop(e){return this.inViewport&&(this._debug(s.stopped,!0),this.exitCallbacks.forEach(t=>t(this.toJSON(e)))),this}toJSON(e=""){return{startTime:1e6*this.startTime,endTime:1e6*Date.now(),forcedExit:e}}toDebugJSON(){return{pinID:this.debugId,startTime:this.startTime,endTime:Date.now(),duration:`${(Date.now()-this.startTime)/1e3} seconds`}}_debug(e,t){if(a)switch(window.console.log(`📌 ${e} -- ${this.debugId}`),!0===t&&window.console.log(this.toDebugJSON()),"object"==typeof t&&window.console.log(t),l[e]&&Object.assign(this.node.style,l[e]),e){case s.flushed:case s.paused:case s.exit:n[this.debugId]=!0}}}function u(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let c=!0,h=!1;class p{constructor(){u(this,"_delegateChange",e=>{e.forEach(e=>{let t=this.activeImpressions.get(e.target);t&&t.handleIntersectionChange(e)})}),u(this,"_handleMutations",(e,t)=>{let i=this.mutationObservers.get(t),r=i&&i.offsetHeight<1;r&&i&&this.stop(i,"removed")}),this.activeImpressions=new Map,this.mutationObservers=new Map,this.bottomHeight=0,this.bottomObstructions=new Set,this.pausePriority=h,this.observer=new window.IntersectionObserver(this._delegateChange),window.Cypress&&!window.activeImpressions&&(window.activeImpressions=new Map),this.paused=!1,this.topHeight=0,this.topObstructions=new Set,this.inExperiment=!1}setExperimentStatus(e){this.inExperiment!==e&&(this.inExperiment=e)}stop(e,t=""){let i=this.activeImpressions.get(e);i&&(i.stop(t),this.mutationObservers.delete(i.mutationObserver),i.stopMutationObserver(),this.activeImpressions.delete(e),window.activeImpressions?.delete(e),this.observer.unobserve(e))}start(e){let t=this.activeImpressions.get(e);return t||(t=new d(e),this.activeImpressions.set(e,t),window.activeImpressions?.set(e,t),this.observer.observe(e),t.setMutationObserver(new window.MutationObserver((e,t)=>this._handleMutations(e,t))),this.mutationObservers.set(t.mutationObserver,e),t.startMutationObserver({subtree:!0,attributes:!0,attributeFilter:["style"]})),t}pause(e=c){this.paused||(Array.from(this.activeImpressions.values()).forEach(e=>e.pause()),this.paused=!0,this.pausePriority!==h||(this.pausePriority=e))}resume(e=c){(e!==h||this.pausePriority!==c)&&this.paused&&(Array.from(this.activeImpressions.values()).forEach(e=>e.resume()),this.paused=!1,this.pausePriority=h)}addObstruction(e,t){"top"===e?this.topObstructions.add(t):"bottom"===e&&this.bottomObstructions.add(t),this._calculateRootMargins()}removeObstruction(e,t){"top"===e?this.topObstructions.delete(t):"bottom"===e&&this.bottomObstructions.delete(t),this._calculateRootMargins()}updateObstructions(){this._calculateRootMargins()}_calculateRootMargins(){let e=Array.from(this.topObstructions).reduce((e,t)=>{let{bottom:i}=t.getBoundingClientRect();return i>e?i:e},0),t=window.innerHeight-Array.from(this.bottomObstructions).reduce((e,t)=>{let{top:i}=t.getBoundingClientRect();return i<e?i:e},window.innerHeight);if(e!==this.topHeight||t!==this.bottomHeight){let i={rootMargin:`${-e}px 0px ${-t}px`};this.observer.disconnect(),this.observer=new window.IntersectionObserver(this._delegateChange,i),Array.from(this.activeImpressions.values()).forEach(e=>this.observer.observe(e.node)),this.topHeight=e,this.bottomHeight=t}}}},30378:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(307772);let a=new r.ZP},339001:(e,t,i)=>{i.d(t,{Wc:()=>l,bF:()=>u,nk:()=>o,r7:()=>c});var r=i(667294),a=i(785893);function s(e,t,i){return e.split(i).map(e=>{if(e.match(i)){let i=e.replace(/[\{\}]/g,"").trim();if(Object.prototype.hasOwnProperty.call(t,i))return t[i]}return e})}let n=/(\{\{\s*\w+\s*\}\})/g;function o(e,t){return s(e,t,n)}function l(e,t){return s(e,t,n).join("")}let d=/(\{\s*\w+\s*\})/g;function u(e,t){return s(e,t,d)}let c=({text:e})=>Array.isArray(e)?e.map((e,t)=>(0,a.jsx)(r.Fragment,{children:e},t)):e},705895:(e,t,i)=>{function r(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:()=>n});let a=new class{constructor(){r(this,"onResumeListeners",[]),r(this,"onPauseListeners",[]),r(this,"inExp",!1),r(this,"windowInFocus",!0)}setExperiment(e=!1){this.inExp=e}onSessionResume(e){return this.onResumeListeners.push(e),this}onSessionPause(e){return this.onPauseListeners.push(e),this}removeResumeListener(e){this.onResumeListeners.filter(t=>t!==e)}removePauseListener(e){this.onPauseListeners=this.onPauseListeners.filter(t=>t!==e)}getAppState(){return this.windowInFocus?0:void 0}},s=e=>{if(e.isHidden){let{reason:t}=e;a.windowInFocus=!1,a.onPauseListeners.forEach(e=>e(t))}else a.windowInFocus=!0,a.onResumeListeners.forEach(e=>e())};setTimeout(()=>{window.addEventListener("beforeunload",()=>s({isHidden:!0,reason:"beforeunload"})),window.addEventListener("focus",()=>s({isHidden:!1})),window.addEventListener("blur",()=>s({isHidden:!0,reason:"blur"})),window.addEventListener("pageshow",()=>s({isHidden:!1})),window.addEventListener("pagehide",()=>s({isHidden:!0,reason:"pagehide"})),void 0!==document.hidden?document.addEventListener("visibilitychange",()=>s(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",()=>s(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1)},0);let n=a},558273:(e,t,i)=>{i.d(t,{NK:()=>S,P6:()=>s,VX:()=>o,ZE:()=>y,Zt:()=>f,_J:()=>d,_S:()=>v,cL:()=>p,jL:()=>l,oN:()=>a,rM:()=>m,sV:()=>u,sY:()=>c});var r=i(115557);let a=5e3,s=a/r.gJ,n=["Uploaded by user"],o=(e,t)=>t&&t.products&&t.products.length>0||e?.products&&e.products.length>0||!1,l=(e,t)=>!!t&&!e,d=e=>!!e&&5!==e,u=e=>["email","messages","deep_linking"].includes(e),c=e=>!!e&&"gif"===e,h=e=>"pinstory"===e,p=({embedSrc:e,embedSubtype:t,embedType:i})=>!!e&&!c(i)&&!h(t),m=({link:e,mobileLink:t,trackedLink:i})=>!t&&!i&&!e,y=e=>/pin.it/gim.test(e||""),f=({link:e,mobileLink:t,origImageUrl:i,trackedLink:r})=>t||r||e||i||"",S=(e,t)=>({deeplinkUri:{android:`pin/${e}/repin`,iOS:`repin/${e}`},mwebUri:{pathname:`/pin/${e}/repin/`,state:{trackingParams:t.state?t.state.trackingParams:""}}});function v(e){for(let t of n)if(e===t)return!1;return!0}},371626:(e,t,i)=>{i.d(t,{Z:()=>r});let r=e=>{switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";case"CA":return"CA";case"GB":return"GB";case"FR":return"FR";case"DE":return"DE";case"AU":return"AU";case"IN":return"IN";default:return"OTHER"}}},608516:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(14583);let a=r.Z},447479:(e,t,i)=>{i.d(t,{i:()=>r});let r={AC:"ac",AUTOCOMPLETE:"autocomplete",BOARD:"blp",DIRECT_NAVIGATION:"direct_navigation",FILTER:"filter",GUIDED_SEARCH_ENTRY:"guided_search_entry",GUIDED_SEARCH_LANDING:"guided_search_landing",HASHTAG_CLOSEUP:"hashtag_closeup",HASHTAG_PINREP:"hashtag_pinrep",HOMEFEED_BUBBLE:"homefeed_bubble",HUB_PAGE:"hub_page",IMAGE_ONLY_ATTRIBUTION:"image_only_attribution",LANDING_PAGE_STORY:"landing_page_story",NO_RESULTS_SEARCH_STORY:"no_results_search_story",PRODUCT:"product",REMOVE:"remove",RS:"rs",SITELINKS_SEARCHBOX:"sitelinks_searchbox",SLP_REC_CURATED:"slp_rec_curated",SLP_REC_TRENDING:"slp_rec_trending",SRS:"srs",STRUCTURED_GUIDE:"structured_guide",TRENDING:"trending",TYPED:"typed",TYPO_AUTO_ORIGINAL:"typo_auto_original",TYPO_SUGGESTION:"typo_suggestion",UNKNOWN:"Unknown",VANILLA_GUIDE:"guide",VIDEO:"video"}},214164:(e,t,i)=>{i.d(t,{Wr:()=>c,Hx:()=>p,RC:()=>h});var r=i(667294),a=i(342513),s=i(951050),n=i(587070),o=i(785893);let l=()=>Promise.resolve().then(i.bind(i,951050)),{Provider:d,useHook:u}=(0,a.Z)("IdeaPinVideoPlayer");function c({children:e}){let[t,i]=(0,n.Z)(l,s.initialState),a=(0,r.useMemo)(()=>({dispatch:i,ideaPinVideoPlayerControls:t}),[i,t]);return(0,o.jsx)(d,{value:a,children:e})}function h(){let{dispatch:e}=u();return(0,r.useMemo)(()=>({updateSeekTime:(t,i)=>{e({type:"UPDATE_SEEK_TIME",payload:{seekTime:t,pinId:i||""}})},clearSeekTime:t=>{e({type:"CLEAR_SEEK_TIME",payload:{seekTime:void 0,pinId:t||""}})},updateSeekingIdeaPin:t=>{t?e({type:"UPDATE_SEEKING_IDEA_PIN",payload:{isSeekingIdeaPin:t}}):e({type:"UPDATE_SEEKING_IDEA_PIN",payload:{isSeekingIdeaPin:t,seekTime:void 0}})},updateCurrentTime:t=>{e({type:"UPDATE_CURRENT_TIME",payload:{currentTime:t}})},updateDuration:t=>{e({type:"UPDATE_DURATION",payload:{duration:t}})}}),[e])}function p(){let{ideaPinVideoPlayerControls:e}=u();return e}},951050:(e,t,i)=>{i.r(t),i.d(t,{default:()=>a,initialState:()=>r});let r={seekTime:void 0,seekTimes:{},isSeekingIdeaPin:!1,currentProgressInfo:{currentTime:0,duration:0}};function a(e=r,t){switch(t.type){case"UPDATE_SEEK_TIME":return{...e,seekTimes:{...e.seekTimes,[t.payload.pinId]:t.payload.seekTime},seekTime:t.payload.seekTime};case"CLEAR_SEEK_TIME":return{...e,seekTimes:{},seekTime:void 0};case"UPDATE_SEEKING_IDEA_PIN":return{...e,isSeekingIdeaPin:t.payload.isSeekingIdeaPin};case"UPDATE_CURRENT_TIME":return{...e,currentProgressInfo:{...e.currentProgressInfo,currentTime:t.payload.currentTime}};case"UPDATE_DURATION":return{...e,currentProgressInfo:{...e.currentProgressInfo,duration:t.payload.duration}};default:return e}}},873955:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(958881);let a=/\{\{\s*(\w+)\s*\}\}/g,s=(e,t)=>(0,r.Z)(a,e,t)},498659:(e,t,i)=>{i.d(t,{Z:()=>r});let r=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},958881:(e,t,i)=>{i.d(t,{Z:()=>r});let r=(e,t,i)=>t?t.replace(e,(e,t)=>i&&Object.prototype.hasOwnProperty.call(i,t)?i[t]:""):""},427514:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(873955),a=i(498659);let s=(e,t)=>{let i={};return Object.keys(t).forEach(e=>{i[e]=t[e]?(0,a.Z)(t[e].toString()):""}),(0,r.Z)(e,i)}},13848:(e,t,i)=>{i.d(t,{F9:()=>s,Zo:()=>a});var r=i(342513);let{Provider:a,useHook:s}=(0,r.Z)("toastManagerContext")},862249:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(968946);let a=({url:e})=>!!(e&&e.match(/^https{0,1}:\/\//)&&!(0,r.Z)(e))},587070:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(667294);function a(e,t){let i=(0,r.useRef)([]),[a,s]=(0,r.useState)(),[n,o]=(0,r.useReducer)(a??(()=>t),t),l=(0,r.useCallback)(t=>{a?o(t):(i.current.length||e().then(e=>{s(()=>e.default)}),i.current=[...i.current,t])},[e,a]);return(0,r.useEffect)(()=>{a&&(i.current.forEach(o),i.current=[])},[a]),[n,l]}},494125:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(667294);let a=e=>{(0,r.useEffect)(e,[])}},584452:(e,t,i)=>{i.d(t,{Z:()=>g});var r=i(667294),a=i(293041),s=i(883119),n=i(587703),o=i(406893),l=i(340523),d=i(5859),u=i(149722),c=i(813779),h=i(115557),p=i(239821),m=i(734950),y=i(785893);function f(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let S=(e,t)=>typeof e!=typeof t||(Array.isArray(t)?e.length!==t.length||t.some((t,i)=>!Array.isArray(e)||t.type!==e[i].type||t.src!==e[i].src):t!==e),v=e=>e[0].src?[{...e[0],src:e[0].src}]:e,b=e=>"string"==typeof e?e:Array.isArray(e)?v(e):e;class E extends r.PureComponent{constructor(...e){super(...e),f(this,"state",{canPlayVideo:!1,isManifestParsed:!1,playbackState:h.Cy.DEFAULT,videoStartTime:this.props.seekTime||0}),f(this,"errorRetryCount",1),f(this,"firstFragBuffered",!1),f(this,"hasPlaybackStarted",!1),f(this,"hasVideoSessionStarted",!1),f(this,"hasVideoSessionEnded",!1),f(this,"hls",null),f(this,"fragStartupTime",{}),f(this,"lastLevelSwitchKbps",null),f(this,"lastStallTime",null),f(this,"lastPauseTime",null),f(this,"logSessionStartOnNextPlay",!1),f(this,"playerId",""),f(this,"videoSessionId",""),f(this,"videoVisibleTime",null),f(this,"playbackPerformance",{canPlayTime:null,detailedErrors:"",downloadedKiloBytes:0,errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:"string"==typeof this.props.src?this.props.src:this.props.src[0].src,totalStallDurationMs:0,totalPauseDurationMs:0,videoCreatedTime:null,webBrowser:this.props.webBrowser,webBrowserVersion:this.props.webBrowserVersion}),f(this,"initializeHls",()=>{this.destroyHls();let{src:e,hlsConfig:t}=this.props,i=new a.ZP(t),r=b(e);i.loadSource(r),this.videoPlayerRef&&i.attachMedia(this.videoPlayerRef.video),i.on(a.ZP.Events.FRAG_BUFFERED,this.handleHlsFragBuffered),i.on(a.ZP.Events.FRAG_CHANGED,this.handleHlsFragChanged),i.on(a.ZP.Events.FRAG_LOADING,this.handleHlsFragLoading),i.on(a.ZP.Events.FRAG_LOADED,this.handleHlsFragLoaded),i.on(a.ZP.Events.MANIFEST_PARSED,()=>{this.setState({isManifestParsed:!0})}),i.on(a.ZP.Events.LEVEL_SWITCHED,this.handleHlsLevelSwitched),i.on(a.ZP.Events.ERROR,this.handleHlsError),this.hls=i}),f(this,"destroyHls",()=>{let{hls:e}=this;e&&e.destroy()}),f(this,"addSegment",e=>{let{segments:t}=this.playbackPerformance,i=t&&t[t.length-1];if(this.hls&&t.length&&i&&i.uri!==e.url){this.updateWatchDurationForCurrentSegment();let i=this.videoPlayerRef&&this.videoPlayerRef.video,r=this.hls&&this.hls.levels||{},a="number"==typeof e.level?r[e.level]:{},s=this.fragStartupTime[e.url],n=-1;s&&s.startLoadTime&&s.endLoadTime&&(n=s.endLoadTime-s.startLoadTime);let o={indicatedKbps:a.bitrate/h.bR,duration:e.duration,level:e.level,lastStartPlayTime:this.getCurrentVideoTime(),numServerAddressChange:-1,observedKbps:this.hls&&this.hls.bandwidthEstimate/h.bR||-1,playbackStartDate:Date.now(),serverAddress:"",sn:e.sn,sourceWidth:a.width,sourceHeight:a.height,startupTimeMs:n,switchBitrateKbps:this.lastLevelSwitchKbps||-1,uri:e.url,viewportWidth:i&&i.clientWidth||-1,viewportHeight:i&&i.clientHeight||-1,watchedDurationMs:0};t.push(o)}}),f(this,"initializeSegments",e=>{let{contextLogData:t={}}=this.props,{is_closeup_video:i=!1}=t,{segments:r}=this.playbackPerformance;if(!r.length){if(!this.hls||!this.videoPlayerRef||!this.videoPlayerRef.video||!e){(0,c.tE)("initializeSegmentsFailed",!0,i);return}if(!r.length&&"number"==typeof e.level){let t=this.videoPlayerRef&&this.videoPlayerRef.video,{levels:i}=this.hls,a="number"==typeof e.level?i[e.level]:{},s=this.fragStartupTime[e.url],n=-1;s&&s.startLoadTime&&s.endLoadTime&&(n=s.endLoadTime-s.startLoadTime),this.lastLevelSwitchKbps=this.hls.bandwidthEstimate/h.bR;let o={indicatedKbps:a.bitrate/h.bR,duration:e.duration,level:e.level,lastStartPlayTime:null,numServerAddressChange:-1,observedKbps:this.hls.bandwidthEstimate/h.bR||-1,playbackStartDate:null,serverAddress:"",sn:e.sn,sourceWidth:a.width,sourceHeight:a.height,startupTimeMs:n,switchBitrateKbps:this.lastLevelSwitchKbps||-1,uri:e.url,viewportWidth:t.clientWidth,viewportHeight:t.clientHeight,watchedDurationMs:0};r.push(o)}}}),f(this,"getCurrentVideoTime",()=>this.videoPlayerRef&&this.videoPlayerRef.video?this.videoPlayerRef.video.currentTime*h.gJ:null),f(this,"handleCanPlayVideo",e=>{let{contextLogData:t={},onReady:i,playing:r}=this.props,{is_closeup_video:a=!1}=t,{canPlayVideo:s}=this.state;(0,c.tE)("handleCanPlayVideo",!0,a,{firstCanPlayEvent:!s,playing:r}),this.playbackPerformance.hasFatalError=!1,s||(this.playbackPerformance.canPlayTime=new Date),this.setState({canPlayVideo:!0}),i&&i(e)}),f(this,"handleEnded",e=>{let{loop:t,onEnded:i}=this.props,{segments:r}=this.playbackPerformance,a=r&&r[r.length-1];t&&this.videoPlayerRef&&this.videoPlayerRef.video?(this.updateWatchDurationForCurrentSegment(),a&&(a.lastStartPlayTime=0),this.fragStartupTime={}):t||this.logPlaybackPerformance(h.$f,{initiator:"videoEnded",loop:t}),this.setState({playbackState:h.Cy.ENDED}),i&&i(e)}),f(this,"handleHlsError",(e,t)=>{let{contextLogData:i={}}=this.props,{is_closeup_video:r=!1}=i;if(this.playbackPerformance.detailedErrors+=`${this.playbackPerformance.detailedErrors.length>0?", ":""}${t.details}`,t.fatal){this.playbackPerformance.hasFatalError=!0,this.playbackPerformance.errorName=t.type,this.playbackPerformance.errorReason=t.details,this.playbackPerformance.errorCode=t.response&&t.response.code?t.response.code:0;let e={errorName:t.type,errorReason:t.details,errorRetryCount:this.errorRetryCount,errorMessage:t.err?.message?.slice(0,50)||"unknown",errorResponse:t.response?.text?.slice(0,50)||"unknown",playbackState:this.state.playbackState};if((0,c.tE)("fatalError",!0,r,e),this.errorRetryCount>0)switch(this.errorRetryCount-=1,t.type){case a.ZP.ErrorTypes.NETWORK_ERROR:if(t.details===a.ZP.ErrorDetails.MANIFEST_LOAD_ERROR||t.details===a.ZP.ErrorDetails.MANIFEST_LOAD_TIMEOUT||t.details===a.ZP.ErrorDetails.MANIFEST_LOAD_PARSING_ERROR){let e=b(this.props.src);this.hls?.loadSource(e)}else this.hls?.startLoad();break;case a.ZP.ErrorTypes.MEDIA_ERROR:this.hls?.recoverMediaError()}}this.updateWatchDurationForCurrentSegment(),this.setState({playbackState:h.Cy.FAILED})}),f(this,"handleHlsFragBuffered",(e,t)=>{this.firstFragBuffered||(this.initializeSegments(t.frag),this.firstFragBuffered=!0)}),f(this,"handleHlsFragChanged",(e,t)=>{this.addSegment(t.frag)}),f(this,"handleHlsFragLoading",(e,t)=>{let i=t.frag?.url;i&&!this.fragStartupTime[i]&&(this.fragStartupTime[i]={startLoadTime:new Date})}),f(this,"handleHlsFragLoaded",(e,t)=>{t.frag&&t.frag.loaded&&(this.playbackPerformance.downloadedKiloBytes+=t.frag.loaded/h.Fm);let i=t.frag?.url;i&&this.fragStartupTime[i]&&this.fragStartupTime[i].startLoadTime&&(this.fragStartupTime[i].endLoadTime=new Date)}),f(this,"handleHlsLevelSwitched",()=>{this.hls&&this.hls.bandwidthEstimate&&(this.lastLevelSwitchKbps=this.hls.bandwidthEstimate/h.bR)}),f(this,"handleLoadedMetadata",()=>{this.setState({playbackState:h.Cy.LOADED_METADATA})}),f(this,"handleLoadStart",()=>{this.playbackPerformance.loadStartTime=new Date,this.setState({playbackState:h.Cy.LOAD_START})}),f(this,"handleLoadedData",()=>{this.setState({playbackState:h.Cy.LOADED_DATA})}),f(this,"handlePlaying",e=>{this.playbackPerformance.hasFatalError=!1,this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.updateStallDuration(),this.updatePauseDuration(),this.setState({playbackState:h.Cy.PLAYING}),this.props.clearSeekTime&&this.props.clearSeekTime(),this.props.onPlaying&&this.props.onPlaying(e)}),f(this,"handleUserPause",e=>{let{onControlsPause:t}=this.props;this.lastPauseTime=new Date,t&&t(e)}),f(this,"handleVideoPause",()=>{this.state.playbackState===h.Cy.STALLING||this.state.playbackState===h.Cy.SEEKING||(this.updateWatchDurationForCurrentSegment(),this.lastPauseTime||this.updateStallDuration()),this.setState({playbackState:h.Cy.PAUSED})}),f(this,"handleSeeking",()=>{this.playbackPerformance.numberOfSeeks+=1;let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&(t.lastStartPlayTime=null),this.state.playbackState!==h.Cy.ENDED&&this.setState({playbackState:h.Cy.SEEKING})}),f(this,"handleStalled",()=>{null===this.lastStallTime&&this.state.playbackState!==h.Cy.ENDED&&(this.lastStallTime=new Date,this.playbackPerformance.numberOfStalls+=1),this.setState({playbackState:h.Cy.STALLING})}),f(this,"handleTimeUpdate",e=>{let{onTimeChange:t}=this.props;t&&t(e),this.state.playbackState===h.Cy.PLAYING&&(this.updateWatchDurationForCurrentSegment(),this.setLastSegmentStartPlayTime())}),f(this,"resetPlaybackMetrics",()=>{this.hasPlaybackStarted=!1,this.hasVideoSessionStarted=!1,this.hasVideoSessionEnded=!0,this.lastLevelSwitchKbps=null,this.lastStallTime=null,this.lastPauseTime=null,this.videoSessionId="",this.videoVisibleTime=null,this.logSessionStartOnNextPlay=!1;let e=this.playbackPerformance.segments[this.playbackPerformance.segments.length-1],t={...e,lastStartPlayTime:null,playbackStartDate:null,switchBitrateKbps:-1,watchedDurationMs:0};this.playbackPerformance.detailedErrors="",this.playbackPerformance.downloadedKiloBytes=0,this.playbackPerformance.errorCode=0,this.playbackPerformance.errorName="",this.playbackPerformance.errorReason="",this.playbackPerformance.hasFatalError=!1,this.playbackPerformance.numberOfStalls=0,this.playbackPerformance.numberOfSeeks=0,this.playbackPerformance.playbackStartTimestamp=null,this.playbackPerformance.totalStallDurationMs=0,this.playbackPerformance.segments=[t]}),f(this,"setLastSegmentStartPlayTime",()=>{let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.lastStartPlayTime&&(t.lastStartPlayTime=this.getCurrentVideoTime())}),f(this,"setLastSegmentPlaybackStartDate",()=>{let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.playbackStartDate&&(t.playbackStartDate=Date.now())}),f(this,"setPlaybackStartTime",()=>{this.hasPlaybackStarted||(this.playbackPerformance.playbackStartTimestamp=Date.now(),this.hasPlaybackStarted=!0)}),f(this,"setVideoPlayerRef",e=>{let{setVideoRef:t}=this.props;if(e&&(t&&t(e),this.videoPlayerRef=e,this.videoPlayerRef.video)){let e=this.videoPlayerRef.video;e.addEventListener("loadedmetadata",this.handleLoadedMetadata),e.addEventListener("loadeddata",this.handleLoadedData),e.addEventListener("pause",this.handleVideoPause),e.readyState>=3&&(this.setState({canPlayVideo:!0}),this.playbackPerformance.canPlayTime=new Date)}}),f(this,"updateStallDuration",()=>{null!==this.lastStallTime&&(this.playbackPerformance.totalStallDurationMs+=new Date-this.lastStallTime,this.lastStallTime=null)}),f(this,"updatePauseDuration",()=>{if(null!==this.lastPauseTime){let{lastPauseTime:e}=this;this.playbackPerformance.totalPauseDurationMs+=new Date-e,this.lastPauseTime=null}}),f(this,"updateWatchDurationForCurrentSegment",()=>{let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1],i=t?t.lastStartPlayTime:null,r=this.getCurrentVideoTime();if(t&&null!==i&&"number"==typeof r&&"number"==typeof i){let e=r-i;e>0&&(t.watchedDurationMs+=e,t.lastStartPlayTime=null)}}),f(this,"logPlaybackPerformance",(e,t)=>{let{contextLogData:i={},userId:r,isAutoPlay:a,logContextEvent:s,preload:n,webBrowser:o,webBrowserVersion:l}=this.props,{is_closeup_video:d=!1}=i,{canPlayTime:u,detailedErrors:p,downloadedKiloBytes:m,errorCode:y,errorName:f,errorReason:S,hasFatalError:v,playbackStartTimestamp:b,totalPauseDurationMs:E,totalStallDurationMs:g,segments:_,srcString:P,loadStartTime:T,numberOfStalls:R,numberOfSeeks:I}=this.playbackPerformance,D=this.videoPlayerRef&&this.videoPlayerRef.video,w=e===h.DR,A=w&&!this.hasVideoSessionStarted,O=!w&&!this.hasVideoSessionEnded&&this.hasVideoSessionStarted;if(this.hls&&D&&(A||O)){let A=-1;u&&T&&(A=u>T?u-T:0);let O=-1;u&&this.videoVisibleTime&&(O=u>this.videoVisibleTime?u-this.videoVisibleTime:0),w&&(this.videoSessionId=(0,h.Y7)(r),this.playerId=this.playerId||(0,h.EB)());let C={autoplaying:a,averageVideoKbps:-1,detailedErrors:p,downloadedKiloBytes:m,isCellular:!1,errorCode:y,errorName:f,errorReason:S,fatalError:v,nativeVideoDurationMs:D.duration*h.gJ||-1,numberOfStalls:R,numberOfSeeks:I,overallPausedDurationMs:E,overallBufferDurationMs:g,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:this.videoSessionId,playbackStartTimestamp:b||-1,segments:[],sessionMark:e,screenPixelScale:window?.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:D.clientWidth,startupPlayerHeight:D.clientHeight,startupTimeMs:A,startupLatencyMs:O,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:D.videoWidth,startupVariantHeight:D.videoHeight,videoUrl:P,wasVideoPreloaded:"auto"===n};if(!w&&_.length){let{levels:e}=this.hls,t=_[0];this.updateWatchDurationForCurrentSegment(),this.updateStallDuration();let i=_.reduce((t,i)=>{if(!i||"number"!=typeof i.level||!e||!(e.length>0))return t;{let r=(e[i.level]||{}).bitrate,a=i.watchedDurationMs;return t+r*(a||0)/h.gJ}},0),r=_.reduce((e,t)=>e+(t.watchedDurationMs||0),0),a=null,s=0,n=0;do s+=_[n].watchedDurationMs,a=a||_[n].level,n+=1;while(n<_.length&&_[n].level===a)C.startupVariantKbps=t.indicatedKbps,C.startupVariantWatchedDurationMs=s,C.startupVariantWidth=t.sourceWidth,C.startupVariantHeight=t.sourceHeight,C.startupPlayerWidth=t.viewportWidth,C.startupPlayerHeight=t.viewportHeight,C.overallWatchedDurationMs=r,r>0?(C.averageVideoKbps=i/(r/h.gJ),C.rebufferRate=this.playbackPerformance.totalStallDurationMs/r):0===r&&(C.averageVideoKbps=-1,C.rebufferRate=-1,C.errorName="invalid_watch_duration"),C.segments=_}else C.errorName="invalid_watch_duration";(0,c.ZP)(C,!0,d,{playbackState:this.state.playbackState,...t});let{clientTrackingParams:k,component:x,durationNs:N,element:L,objectId:M,pairId:V,viewData:U,view:H,viewParameter:F,...j}=i;s({aux_data:{...j,is_closeup_video:d,playback_session_id:this.videoSessionId,web_browser:o,web_browser_version:l},clientTrackingParams:k,component:x,duration_ns:N,element:L,event_data:{videoPerformanceData:C},event_type:3606,object_id_str:M,pair_id:V,view_data:U,view_parameter:F,view_type:H}),w?(this.hasVideoSessionStarted=!0,this.hasVideoSessionEnded=!1):this.resetPlaybackMetrics(),(0,c.tE)(w?"sessionStart":"sessionEnd",!0,d,{playbackState:this.state.playbackState,...t})}})}componentDidMount(){let{contextLogData:e={},playing:t}=this.props,{is_closeup_video:i=!1}=e;this.playbackPerformance.videoCreatedTime=new Date,this.initializeHls(),(0,c.tE)("videoMounted",!0,i),t&&(this.videoVisibleTime=new Date,this.logPlaybackPerformance(h.DR,{initiator:"mount"}))}componentDidUpdate(e){let{loop:t,playing:i,src:r,visible:a,appInFocus:s,seekTime:n,captionsEnabled:o}=this.props,l=this.videoPlayerRef?.video?.textTracks[0];l&&(o?l.mode="showing":l.mode="disabled",l.addEventListener("cuechange",()=>{let e=l.activeCues&&l.activeCues.length>0&&l.activeCues[0];e&&e.line&&(e.line=-6,e.size=88)})),n&&n!==e.seekTime&&this.setState({videoStartTime:n}),S(e.src,r)&&this.initializeHls(),e.appInFocus&&!s&&(this.logPlaybackPerformance(h.$f,{initiator:"update",loop:t}),this.logSessionStartOnNextPlay=!0),e.visible&&!1===a&&(this.logSessionStartOnNextPlay=!1,this.updatePauseDuration(),this.logPlaybackPerformance(h.$f,{initiator:"update",loop:t})),!1===e.visible&&!0===a&&(this.videoVisibleTime=this.videoVisibleTime||new Date,i?(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(h.DR,{initiator:"update"})):this.logSessionStartOnNextPlay=!0),i&&s&&this.logSessionStartOnNextPlay&&(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(h.DR,{initiator:"update"}),this.logSessionStartOnNextPlay=!1)}componentWillUnmount(){let{loop:e}=this.props;this.updatePauseDuration(),this.logPlaybackPerformance(h.$f,{initiator:"unmount",loop:e}),this.destroyHls()}render(){let{aspectRatio:e,backgroundColor:t,captions:i,controls:r,loop:a,loopOverride:n,objectFit:l,onDurationChange:d,onFullscreenChange:u,onLoadedChange:c,onControlsPlay:h,onPlayheadDown:p,onPlayheadUp:f,onSeek:S,onVolumeChange:v,playbackRate:E,playing:g,playsInline:_,poster:P,preload:T,src:R,volume:I,webBrowser:D,webBrowserVersion:w}=this.props,{canPlayVideo:A,isManifestParsed:O,videoStartTime:C}=this.state,k=b(R);return(0,y.jsxs)(s.xu,{children:[(0,y.jsx)(o.Z,{unsafeCSS:m.P}),(0,y.jsx)(s.nk,{ref:this.setVideoPlayerRef,aspectRatio:e,backgroundColor:t,captions:i,controls:r,loop:void 0===n?a:n,objectFit:l,onControlsPause:this.handleUserPause,onControlsPlay:h,onDurationChange:d,onEnded:this.handleEnded,onFullscreenChange:u,onLoadedChange:c,onLoadStart:this.handleLoadStart,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:p,onPlayheadUp:f,onPlaying:this.handlePlaying,onReady:this.handleCanPlayVideo,onSeek:S,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:v,onWaiting:this.handleStalled,playbackRate:E,playing:O&&A&&g,playsInline:_,poster:P,preload:T,src:k,startTime:C,volume:I,webBrowser:D,webBrowserVersion:w})]})}}let g=(0,r.memo)(function(e){let{country:t,isAuthenticated:i,isBot:r,isSocialBot:a,unauthId:s,userAgent:o}=(0,d.B)(),h=(0,n.Z)(),m=(0,u.Z)(),{browserName:f,browserVersion:S,isMobile:v}=o,{contextLogData:b={}}=e,{is_closeup_video:g=!1,view:_,viewParameter:P}=b,{checkExperiment:T}=(0,l.F)(),{appUI:R}=(0,p.I)(),I=T("web_video_fail_to_start_fix").anyEnabled?R.appInFocus:e.appInFocus;return(0,c.r$)({browserName:f,browserVersion:S,country:t,isAuthenticated:i,isBot:r,is_closeup_video:g,isMobile:v,isSocialBot:a,view:_,viewParameter:P}),(0,y.jsx)(E,{...e,appInFocus:I,logContextEvent:h,userId:m.id||s,webBrowser:f,webBrowserVersion:S})})},369708:(e,t,i)=>{i.d(t,{Wr:()=>u,rG:()=>d});var r=i(667294),a=i(214877),s=i(342513),n=i(340523),o=i(785893);let{Provider:l,useHook:d}=(0,s.Z)("VideoPlayer");function u({children:e}){let{logContextEvent:t,logImpression:i}=(0,a.v)(),{checkExperiment:s}=(0,n.F)(),[d,u]=(0,r.useState)(!1),[c,h]=(0,r.useState)([]),[p,m]=(0,r.useState)([]),[y,f]=(0,r.useState)({}),S=s("web_ads_mrc_video_impression").anyEnabled,v=e=>{f(t=>({...t,[e]:!0}))},b=(0,r.useCallback)(e=>{if(18===e.event_type&&e.event_data?.pinImpressions?.length){let{isNativeVideoAndWatchable:t}=e.event_data.pinImpressions[0],i=(e.aux_data?.commerce_data||"").includes("story_pin_id");S&&(t||i)&&h(t=>[...t,e].slice(-1e3))}},[S]),E=(0,r.useCallback)(e=>{18===e.eventType&&S&&m(t=>[...t,e].slice(-1e3))},[S]),g=e=>{let{renderDuration:t,time:i}=e.event_data.pinImpressions[0],r=Math.max(t,15e8);return{...e,event_data:{...e.event_data,pinImpressions:[{...e.event_data.pinImpressions[0],isMrcBtr:!0,endTime:i+r,renderDuration:r}]}}},_=e=>{if(e.eventData){let{time:t,endTime:i}=e.eventData;return{...e,eventData:{...e.eventData,isMrcBtr:!0,endTime:(t??0)+Math.max((i??0)-(t??0),15e8)}}}return null};(0,r.useEffect)(()=>{let e=c.filter(e=>{let{pinIdStr:i}=e.event_data.pinImpressions[0],r=y[i];if(r&&S){let i=g(e);return t(i),!1}return!0});e.length!==c.length&&h(e)},[c,S,t,y]),(0,r.useEffect)(()=>{let e=p.filter(e=>{let t=e.eventData?.pinIdStr;if(!t)return!1;let r=y[t];if(r&&S){let t=_(e);return t&&i(t),!1}return!0});e.length!==p.length&&m(e)},[p,S,i,y]);let P=(0,r.useMemo)(()=>({captionsEnabled:d,logMrcVideoAdImpressionOnPlay:E,logMrcVideoAdEventOnPlay:b,setCaptionsEnabled:u,setVideoPlayed:v,videosPlayed:y}),[d,b,E,y]);return(0,o.jsx)(l,{value:P,children:e})}},813779:(e,t,i)=>{i.d(t,{ZP:()=>h,r$:()=>u,tE:()=>c});var r=i(371626),a=i(115557),s=i(953565);let n=["isCellular","videoUrl","sessionMark"],o={},l="",d=e=>e<0?"negative":0===e?"zero":e<200?"xs":e<400?"s":e<600?"m":e<800?"l":e<1e3?"xl":e<1200?"xxl":"over1200",u=e=>{let{browserName:t,browserVersion:i,country:a,isAuthenticated:s,isBot:n,isMobile:d,isSocialBot:u,view:c="unknown",viewParameter:h="unknown"}=e;l=u&&"socialBot"||n&&"bot"||"nonbot";let p=(0,r.Z)(a);o={browserName:t,browserVersion:i?.split(".")[0]||"0",isAuthenticated:s,isMobile:d,region:p,view:c,viewParameter:h}};function c(e,t,i,r={}){let a={...r,...o},n=`web.video.${t?"hls":"nonHls"}.${l}.${i?"closeup":"nonCloseup"}.${e}`;"nonbot"===l&&(0,s.nP)(n,{sampleRate:1,tags:a})}function h(e,t,i,r={}){let u=i?"closeup":"nonCloseup",c=t?"hls":"nonHls",h=e.sessionMark===a.DR?"sessionStart":"sessionEnd",p={...r,...o};if("nonbot"===l&&(Object.entries(e).forEach(([t,i])=>{let r=`web.video.${c}.${l}.${u}.${h}.${t}`,a=parseInt(i,10),o="number"==typeof a?a:-1;if(!n.includes(t)){if(t.includes("fatalError")&&!0===i){let{errorCode:t,errorName:i,errorReason:a}=e;(0,s.nP)(r,{sampleRate:1,tags:{errorCode:t,errorName:i,errorReason:a,...p}})}else if(t.includes("Width")||t.includes("Height")){let e=d(o);(0,s.nP)(r,{sampleRate:1,tags:{dimensionBucket:e,...p}})}else if("numberOfStalls"===t){let e=i;o>1e3?e="over1000":o>10?e="over10":o<0&&(e="negative"),(0,s.nP)(r,{sampleRate:1,tags:{numberOfStalls:e,...p}})}else"screenPixelScale"===t?(0,s.nP)(r,{sampleRate:1,tags:{screenPixelScale:i||-1,...p}}):o>=0?(0===o&&(0,s.nP)(`${r}.zero`,{sampleRate:1,tags:p}),(0,s.LY)(r,o,{sampleRate:1})):o<0&&(0,s.nP)(`${r}.negative`,{sampleRate:1,tags:p})}}),e.sessionMark!==a.DR)){let{rebufferRate:t,screenPixelScale:i,startupLatencyMs:r,startupVariantWidth:a,startupPlayerWidth:n}=e,o=`web.video.${c}.${l}.${u}.${h}`;"number"==typeof a&&"number"==typeof n&&"number"==typeof i&&(0,s.nP)(`${o}.upscaled.${1.5*a>i*n?"good":"bad"}`,{sampleRate:1,tags:p}),"number"==typeof r&&(0,s.nP)(`${o}.startupLatency.${r<500?"good":"bad"}`,{sampleRate:1,tags:p}),"number"==typeof t&&(0,s.nP)(`${o}.rebufferRate.${t<.01?"good":"bad"}`,{sampleRate:1,tags:p})}}},115557:(e,t,i)=>{i.d(t,{$f:()=>s,Cy:()=>d,DR:()=>a,EB:()=>h,Fm:()=>l,Y7:()=>c,bR:()=>o,gJ:()=>n,lG:()=>u});var r=i(172045);let a=1,s=2,n=1e3,o=1e3,l=1e3,d=Object.freeze({DEFAULT:0,LOAD_START:1,LOADED_METADATA:2,LOADED_DATA:3,PLAYING:4,PAUSED:5,SEEKING:6,STALLING:7,FAILED:8,ENDED:9}),u=Object.freeze({MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4});function c(e){return e+"-"+(0,r.Z)()}function h(){return(0,r.Z)()}},537513:(e,t,i)=>{i.d(t,{Z:()=>s,e:()=>a});var r=i(419075);let a=e=>{if("undefined"==typeof window)return"";let t=0,i=document.querySelector('[data-test-id="header"]');if(null!==i){let{height:e}=i.getBoundingClientRect();t+=e}switch(e){case"AuthHomefeed":let r=document.querySelector('[data-root-margin="more-ideas-tabs"]');if(null!==r){let{height:e}=r.getBoundingClientRect();t+=e}break;case"SearchItem":let a=document.querySelector('[data-root-margin="search-improvements-bar"]');if(null!==a){let{height:e}=a.getBoundingClientRect();t+=e}let s=document.querySelector('[data-test-id="search-tab-bar"],[data-root-margin="search-one-bar"]');if(null!==s){let{height:e}=s.getBoundingClientRect();t+=e}}return`${-1*t}px 0px 0px 0px`},s=({videosDuration:e,vHLSV4VideoDuration:t,storyPinDataTotalVideoDuration:i})=>{let a=(0,r.Z)(e||t||i||0);return a}},239821:(e,t,i)=>{i.d(t,{g:()=>h,I:()=>c});var r=i(667294),a=i(342513),s=i(705895),n=i(259866);let o={appInFocus:!0,footerPlusButtonVisible:!0,isAutoplay:!1,showTypeaheadOverlay:!1,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},viewportSize:"lg"},l=(e=o,t)=>{if("TOGGLE_TYPEAHEAD_OVERLAY"===t.type&&e.showTypeaheadOverlay!==t.payload)return{...e,showTypeaheadOverlay:t.payload};if("SET_CURRENT_VIDEO"===t.type){let{payload:i}=t,{pinId:r,isPromoted:a,currentTime:s,allowMultipleOrganicVideos:o}=i,{videosAutoplaying:l}=e,{currentlyPlayingOrganicVideoId:d,promotedVideosAutoplaying:u,organicVideosAutoplaying:c}=l,h=(0,n.Z)(u),p=(0,n.Z)(c);return a||!d||o?(a?h[r]={pinId:r,currentTime:s,paused:!1}:p[r]={pinId:r,currentTime:s,paused:!1},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:a?d:r,promotedVideosAutoplaying:h,organicVideosAutoplaying:p}}):e}if("SET_IS_AUTOPLAY"===t.type&&e.isAutoplay!==t.payload)return{...e,isAutoplay:t.payload};if("PAUSE_CURRENT_VIDEO"===t.type){let{payload:i}=t,{pinId:r,isPromoted:a,currentTime:s}=i,{videosAutoplaying:o}=e,{promotedVideosAutoplaying:l,organicVideosAutoplaying:d}=o,u=(0,n.Z)(l),c=(0,n.Z)(d);return a?u[r]={...u[r],paused:!0,currentTime:s}:c[r]={...c[r],paused:!0,currentTime:s},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,promotedVideosAutoplaying:u,organicVideosAutoplaying:c}}}if("SET_APP_FOCUS_STATE"===t.type&&e.appInFocus!==t.payload)return{...e,appInFocus:t.payload};if("SET_VIEWPORT_SIZE"===t.type&&e.viewportSize!==t.payload)return{...e,viewportSize:t.payload};if("SET_FOOTER_VISIBILITY_STATE"===t.type&&e.footerPlusButtonVisible!==t.payload)return{...e,footerPlusButtonVisible:t.payload};return e};var d=i(785893);let{Provider:u,useHook:c}=(0,a.Z)("AppUI");function h({children:e}){let[t,i]=(0,r.useReducer)(l,o),a=(0,r.useCallback)(e=>i({type:"PAUSE_CURRENT_VIDEO",payload:e}),[]),n=(0,r.useCallback)(e=>i({type:"SET_APP_FOCUS_STATE",payload:e}),[]),c=(0,r.useCallback)(e=>i({type:"SET_CURRENT_VIDEO",payload:e}),[]),h=(0,r.useCallback)(e=>i({type:"SET_FOOTER_VISIBILITY_STATE",payload:e}),[]),p=(0,r.useCallback)(e=>i({type:"SET_IS_AUTOPLAY",payload:e}),[]),m=(0,r.useCallback)(e=>i({type:"SET_VIEWPORT_SIZE",payload:e}),[]),y=(0,r.useCallback)(e=>i({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:e}),[]),f=(0,r.useMemo)(()=>({pauseAutoplay:a,setCurrentVideo:c,setFooterPlusButtonVisible:h,setIsAutoplay:p,setViewportSize:m,toggleTypeaheadOverlay:y,setAppFocusState:n,appUI:t}),[a,c,h,p,m,y,n,t]);return(0,r.useEffect)(()=>{s.Z.onSessionResume(()=>{n(!0)}).onSessionPause(()=>{n(!1)})},[n]),(0,d.jsx)(u,{value:f,children:e})}},69979:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(883119),a=i(232887);let s=new r.H3([a.Z]),n=s},386008:(e,t,i)=>{i.d(t,{Tt:()=>c,cm:()=>u,kW:()=>l,kY:()=>h,mN:()=>d});var r=i(702664),a=i(342513),s=i(149722),n=i(785893);let{Provider:o,useHook:l}=(0,a.Z)("Users");function d(){let e=l();return t=>e[t]}function u(){let e=l();return(t,i=!1)=>{let r=Object.keys(e).find(i=>e[i].username===t);if(r||!i)return e[r??""]}}function c(){let{id:e}=(0,s.Z)(),t=l();return t[e??""]}function h({children:e}){let t=(0,r.useSelector)(({users:e})=>e,r.shallowEqual);return(0,n.jsx)(o,{value:t,children:e})}},34817:(e,t,i)=>{i.d(t,{Z:()=>o,e:()=>n});var r=i(883119),a=i(5859),s=i(785893);let n=new r.Ry(1);function o({children:e,isImagePinForUnauthOnTablet:t}){let{isAuthenticated:i}=(0,a.B)();return(0,s.jsxs)(r.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"pointer",width:t?"40vw":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!t||void 0,top:!0,zIndex:i?void 0:n,children:[(0,s.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",borderRadius:"6px 6px 0 0",WebkitTransition:"opacity .04s linear",transition:"opacity .04s linear"}},left:!0,opacity:.4,position:"absolute",right:!0,top:!0}),e]})}},232887:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(883119),a=i(34817);let s=new r.H3([a.e]),n=s},572345:(e,t,i)=>{i.d(t,{O:()=>d,Z:()=>u});var r=i(667294),a=i(883119),s=i(140017),n=i(702497),o=i(785893);let l={xs:12,sm:16,md:20,lg:24};function d({children:e}){let t=(0,s.ZP)();return(0,o.jsx)(a.u,{link:(0,o.jsx)(a.rU,{href:n.vBy,target:"blank",children:(0,o.jsx)(a.xv,{color:"inverse",size:"100",weight:"bold",children:t._('Learn more', 'verifiedBadge.tooltip.link', 'Learn more about Pinterest\'s Merchant Guidelines')})}),text:t._('This retailer meets Pinterest\'s Merchant Guidelines', 'merchantVerification.badge.tooltip', 'Badge indicating that a merchant or user is verified'),children:e})}function u({iconOnly:e,isVerifiedIdentity:t,isVerifiedMerchant:i,showText:n,size:u}){let c=(0,s.ZP)(),h=(0,o.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[(0,o.jsx)(a.JO,{accessibilityLabel:c._('Merchant verification badge icon', 'merchantVerification.badge.icon', 'Badge indicating that a merchant or user is verified'),color:"shopping",icon:"workflow-status-ok",inline:!0,size:l[u]}),n&&(0,o.jsx)(a.xu,{marginStart:2,children:(0,o.jsx)(a.xv,{color:"shopping",inline:!0,weight:"bold",children:c._('Verified merchant', 'creator.header.verifiedMerchant', 'this merchant is a verified merchant')})})]});return(0,o.jsxs)(r.Fragment,{children:[i&&!e&&(0,o.jsx)(d,{children:h}),i&&e&&h,t&&!i&&(0,o.jsx)(a.JO,{accessibilityLabel:c._('Domain verification icon', 'domainVerification.badge.icon', 'Badge indicating that a merchant or user is verified'),color:"error",icon:"check-circle",size:l[u]})]})}},64819:(e,t,i)=>{function r(e){return{type:"FEED_ITEM_REORDERED",payload:e}}function a(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}i.d(t,{EX:()=>n,N8:()=>a,Qv:()=>s,_f:()=>r,vX:()=>o});let s=(e,t,i=Object.freeze({}))=>({type:"APPEND_FEED_ITEMS",payload:{id:e,options:i,items:t}});function n(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}function o(e){return{type:"FEED_ITEMS_ADDED",payload:e}}},937310:(e,t,i)=>{i.d(t,{Z:()=>r});let r={AGGREGATED_COMMENTS:"aggregatedComments",AGGREGATED_COMMENT_REPLIES:"aggregated-comment-replies",BOARDFEED:"boardfeed",BOARDLESS_PINS:"boardless-pins",BOARD_SECTIONS:"board-sections",BOARD_SECTION_PINS:"board-section-pins",STORY_PINS_FEED:"story-pins-feed.ts",PROFILE_PINS_FEED:"profile-pins-feed.ts",PROFILE_BOARDS:"profileBoards",SEARCH_PINS:"searchPins",STORY_PIN_DATA:"storyPinData",TODAY_ARTICLE_INTEREST_FEED:"todayArticleInterestFeed",TODAY_TAB:"todayTabFeed",UNIFIED_COMMENTS:"unified-comments",TRIED_IT_FEED:"trieditfeed"}},734950:(e,t,i)=>{i.d(t,{P:()=>y,Z:()=>S});var r=i(667294),a=i(293041),s=i(883119),n=i(86785),o=i(140017),l=i(406893),d=i(340523),u=i(5859),c=i(554786),h=i(369708),p=i(785893);function m(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let y=`
  video::cue {
    color: white;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Helvetica, 'ヒラギノ角ゴ Pro W3', 'メイリオ', Meiryo, 'ＭＳ Ｐゴシック', Arial, sans-serif;
    font-weight: 450;
    font-size: 18px;
  }
`;class f extends r.PureComponent{constructor(...e){super(...e),m(this,"state",{videoStartTime:0,started:!1}),m(this,"setVideoPlayerRef",e=>{let{setVideoRef:t,handlePlay:i,autoplay:r=!0}=this.props;this.videoPlayerRef=e,e&&t&&t(e.video),this.videoPlayerRef&&this.videoPlayerRef.video&&i&&r&&this.videoPlayerRef.video.addEventListener("canplay",()=>{i({userTriggeredPlay:!1})})}),m(this,"hls",null),m(this,"initializeHls",()=>{this.destroyHls();let{src:e}=this.props,t=new a.ZP;a.ZP.isSupported()&&!(0,n.G6)(this.props.requestContext.userAgent.browserName)&&(t.loadSource(e),this.videoPlayerRef&&t.attachMedia(this.videoPlayerRef.video)),this.hls=t}),m(this,"destroyHls",()=>{let{hls:e}=this;e&&e.destroy()}),m(this,"onPlay",({event:e})=>{let{handlePlay:t}=this.props;e.stopPropagation(),t&&t({userTriggeredPlay:!0})}),m(this,"onPause",({event:e})=>{let{handlePause:t}=this.props;e.stopPropagation(),t&&t()}),m(this,"handleVolumeChange",({event:e,volume:t})=>{let{onVolumeChange:i}=this.props;e.stopPropagation(),i&&i({volume:t})}),m(this,"handleOnReady",e=>{this.props.onReady&&this.props.onReady(e)}),m(this,"handleEnded",()=>{let{onEnded:e}=this.props;e&&e()}),m(this,"handlePlaying",()=>{let{clearSeekTime:e,setVideoPlayed:t}=this.props;e&&e(),!this.state.started&&(this.setState({started:!0}),t&&t())})}componentDidMount(){this.initializeHls()}componentWillUnmount(){this.destroyHls()}componentDidUpdate(e){let{activeStreamItemIndex:t,playing:i,src:r,seekTime:s,captionsEnabled:n,isDesktop:o,isTablet:l,requestContext:d,isVideoPin:u}=this.props,{isAuthenticated:c}=d;s&&s!==e.seekTime&&this.setState({videoStartTime:s});let h=this.videoPlayerRef?.video?.textTracks[0];h&&(n?h.mode="showing":h.mode="disabled",h.addEventListener("cuechange",()=>{let e=h.activeCues&&h.activeCues.length>0&&h.activeCues[0];if(e&&e.line&&e.size){if(o)e.line=-6,e.size=88;else{if(e.size=70,u){e.line=-5;return}c?e.line=-8:(e.line=-10,l&&(e.line=-15))}}})),t!==e.activeStreamItemIndex&&this.videoPlayerRef&&this.videoPlayerRef.video&&(this.videoPlayerRef.video.currentTime=0),e.src!==r&&(this.initializeHls(),this.hls&&this.hls.on(a.ZP.Events.MANIFEST_PARSED,()=>{void 0!==i&&i&&this.videoPlayerRef&&this.videoPlayerRef.play()}))}render(){let{aspectRatio:e,controls:t,loop:i=!1,poster:r,src:a,onTimeChange:n,playing:o,volume:d,captions:u,isInCaptionsExperiment:c}=this.props;return(0,p.jsxs)(s.xu,{width:"100%",children:[(0,p.jsx)(l.Z,{unsafeCSS:y}),(0,p.jsx)(s.nk,{ref:this.setVideoPlayerRef,aspectRatio:e,autoplay:o,captions:u,controls:t,crossOrigin:c?"anonymous":void 0,loop:i,onControlsPause:this.onPause,onControlsPlay:this.onPlay,onEnded:this.handleEnded,onPlay:()=>{},onPlayError:()=>{},onPlaying:this.handlePlaying,onReady:this.handleOnReady,onTimeChange:n,onVolumeChange:this.handleVolumeChange,playing:o,playsInline:!0,poster:r,src:a,startTime:this.state.videoStartTime||void 0,volume:d})]})}}function S(e){let{clearSeekTime:t,pinId:i="",seekTime:r}=e,{setVideoPlayed:a}=(0,h.rG)(),s=(0,o.ZP)(),n=(0,u.B)(),l=(0,c.HG)(),m=(0,c.Wb)(),{checkExperiment:y}=(0,d.F)(),{anyEnabled:S}=y("unauth_mweb_video_pin_captions",{dangerouslySkipActivation:!0});return(0,p.jsx)(f,{...e,clearSeekTime:()=>{t&&t(i)},i18n:s,isDesktop:l,isInCaptionsExperiment:S,isTablet:m,requestContext:n,seekTime:r,setVideoPlayed:()=>{i&&a(i)}})}},628189:(e,t,i)=>{i.d(t,{ZP:()=>_});var r=i(667294),a=i(883119),s=i(214877),n=i(920434),o=i(541841),l=i(340523),d=i(537513),u=i(369708),c=i(181056),h=i(131348),p=i(785893);function m(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let y=[0,.25,.5,.75,.95,.97],f=[0,.5,.8,.99,1],S={rootMargin:"-64px 0px 0px 0px",threshold:[...c.iM]},v=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function b(){return new Date().getTime()}function E(e){return!!e.volume&&e.volume>0}class g extends r.Component{constructor(e){super(e),m(this,"videoWrapperRef",(0,r.createRef)()),m(this,"handleWindowResize",()=>{if(!this.fullscreen){let e=this.getDimensions(),{height:t,width:i}=this.currentInterval;e.height!==t||e.width!==i?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}}),m(this,"handlePlayheadDown",({event:e})=>{let{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})}),m(this,"handlePlayheadUp",({event:e})=>{let{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})}),m(this,"handleLoop",()=>{this.videoTime=0}),m(this,"handlePlaying",e=>{this.logVideoStart(),this.props.onPlaying&&this.props.onPlaying(e)}),m(this,"handleTimeChange",e=>{let{seeking:t,ready:i}=this.state;if(!this.currentInterval.videoDuration)return;let r=1e3*e.time,a=function(e,t,i,r){if(e>t||i<=0)return null;for(let a of r){let r=a*i;if(e<=r&&t>r)return a}return null}(this.videoTime,r,this.currentInterval.videoDuration,y);if("number"==typeof a&&this.props.playing&&!t&&i){let e=b();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*a),quartilePercentValue:a})}this.videoTime=r,this.props.onTimeChange&&this.props.onTimeChange(e)}),m(this,"handleDurationChange",e=>{this.currentInterval.videoDuration=1e3*e.duration,this.props.onDurationChange&&this.props.onDurationChange(e)}),m(this,"handleReady",e=>{let{ready:t}=this.state;t||this.setState({ready:!0}),this.props.onReady&&this.props.onReady(e)}),m(this,"handleEnded",e=>{this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)}),m(this,"handleVisibilityChange",e=>{if(0===e.length)return;let t=e.slice(-1)[0],i=function(e,t){for(let i=0;i<t.length;i+=1){let r=t[i],a=t[i+1];if(null==a||r<=e&&e<a)return r}return null}(Number.parseFloat(t.intersectionRatio.toFixed(2)),f);"number"==typeof i&&(this.visible=i>=.5),null==i||i===this.currentInterval.viewability||this.fullscreen||(0===i?this.startNewInterval({viewability:i,playbackState:v.PAUSED}):this.startNewInterval({viewability:i}))}),m(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{if(t){let{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})}),m(this,"handleClose",()=>{this.startNewInterval()}),m(this,"handleContextMenu",e=>{e.preventDefault()}),this.state={ready:!1,seeking:!1,started:!1};let t=b();this.handleWindowResize=(0,n.Z)(this.handleWindowResize,1e3),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:E(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1,this.visible=null}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){let i={};E(e)&&!E(this.props)?i.isAudible=!1:!E(e)&&E(this.props)&&(i.isAudible=!0);let r=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==r&&(i.playbackState=r),Object.keys(i).length>0&&this.startNewInterval(i)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?v.PLAYING:v.PAUSED:v.LOADING}getDimensions(){let e,t;if(this.videoWrapperRef.current){let i=this.videoWrapperRef.current;i.clientHeight&&i.clientWidth&&(e=i.clientHeight,t=i.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){let{closeupStoryPinViewability:i,contextLogData:r,logContextEvent:a,playing:s,surface:n}=this.props,{seeking:o}=this.state,{height:l,width:d,windowHeight:u,windowWidth:c,viewability:h,...p}=t;if(null!=l&&null!=d&&null!=u&&null!=c&&null!=h){let t={...p,gridAutoplay:6904===e&&s&&!o&&("AuthHomefeed"===n||"SearchItem"===n||"RelatedPinGrid"===n||"PdpRelatedPinGrid"===n),height:l,width:d,windowHeight:u,windowWidth:c,viewability:i||h};a({event_type:e,...function(e){let{eventData:{videoEvent:{gridAutoplay:t,videoDuration:i,startTime:r,endTime:a,videoStartTime:s,videoEndTime:n,isAudible:o,height:l,width:d,playbackState:u,quartile:c,quartilePercentValue:h,windowHeight:p,windowWidth:m,viewability:y}},component:f,objectId:S,view:v,viewParameter:b,...E}=e;return{component:f,object_id_str:S,view_type:v,view_parameter:b,aux_data:{...E},event_data:{videoEventData:{gridAutoplay:t,videoDuration:i,time:r,endTime:a,videoTime:s,endVideoTime:n,isAudible:o,height:l,width:d,playbackState:u,quartile:c,quartilePercentValue:h,windowHeight:p,windowWidth:m,viewability:y}}}}({...r,view:this.fullscreen?108:r.view,eventData:{videoEvent:t}})})}}logFourthQuartileEvent(){let e=b();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}logVideoStart(){if(this.state.started)return;let{contextLogData:e,setVideoPlayed:t,shouldLogVideoStart:i}=this.props;if(i){let e=b();this.logVideoEvent(3621,{...this.currentInterval,startTime:e,endTime:e,videoEndTime:this.videoTime})}t(e.objectId),this.setState({started:!0})}startNewInterval(e){let t=b();this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){let{aspectRatio:e,backgroundColor:t,captions:i,contextLogData:r,controls:s,cropHeight:n,hlsConfig:l,isAutoPlay:u,loop:c,objectFit:m,onLoadedChange:y,onControlsPause:f,onControlsPlay:v,onSeek:b,onVolumeChange:E,playbackRate:g,playing:_,playsInline:P,poster:T,preload:R,rootMargin:I,src:D,surface:w,videoStartTime:A,volume:O}=this.props,{seeking:C}=this.state;return void 0!==I&&(S.rootMargin=w?(0,d.e)(w):I),(0,p.jsx)(o.Z,{onVisibilityChange:this.handleVisibilityChange,options:S,children:(0,p.jsx)(a.xu,{ref:this.videoWrapperRef,dangerouslySetInlineStyle:{__style:n?{display:"flex",alignItems:"center",height:`${n}px`}:{}},onContextMenu:this.handleContextMenu,children:(0,p.jsx)(h.default,{aspectRatio:n?236/n:e,backgroundColor:t,captions:i,contextLogData:r,controls:s,hlsConfig:l,isAutoPlay:u,loop:c,objectFit:m,onControlsPause:f,onControlsPlay:v,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:y,onLoop:this.handleLoop,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onPlaying:this.handlePlaying,onReady:this.handleReady,onSeek:b,onTimeChange:this.handleTimeChange,onVolumeChange:E,playbackRate:g,playing:!C&&_,playsInline:P,poster:T,preload:R,src:D,videoStartTime:A,visible:this.visible,volume:O})})})}}function _(e){let{logContextEvent:t}=(0,s.v)(),{checkExperiment:i}=(0,l.F)(),{setVideoPlayed:r}=(0,u.rG)(),a=i("web_video_start_log").anyEnabled;return(0,p.jsx)(g,{...e,logContextEvent:t,setVideoPlayed:r,shouldLogVideoStart:a})}m(g,"defaultProps",a.nk.defaultProps)},131348:(e,t,i)=>{i.r(t),i.d(t,{VideoWrapper:()=>T,default:()=>R,getPlaylistSourceSrc:()=>P});var r=i(667294),a=i(86785),s=i(5859),n=i(214164),o=i(584452),l=i(369708),d=i(239821),u=i(883119),c=i(214877),h=i(406893),p=i(149722),m=i(813779),y=i(115557),f=i(734950),S=i(785893);function v(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function b(e){return e&&void 0!==e?"string"==typeof e?e:Array.isArray(e)&&e[0].src?e[0].src:`unsupported_type_${typeof e}`:"undefined"}class E extends r.Component{constructor(...e){super(...e),v(this,"state",{canPlayVideo:!1,playbackState:y.Cy.DEFAULT,videoStartTime:this.props.seekTime?this.props.seekTime:this.props.videoStartTime||0}),v(this,"errorRetryCount",2),v(this,"hasSegmentStarted",!1),v(this,"hasPlaybackStarted",!1),v(this,"hasVideoSessionStarted",!1),v(this,"hasVideoSessionEnded",!1),v(this,"lastStallTime",null),v(this,"lastPauseTime",null),v(this,"logSessionStartOnNextPlay",!1),v(this,"playerId",""),v(this,"videoSessionId",""),v(this,"videoVisibleTime",null),v(this,"playbackPerformance",{canPlayTime:null,detailedErrors:"",errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:b(this.props.src),totalStallDurationMs:0,totalPauseDurationMs:0,webBrowser:this.props.webBrowser,webBrowserVersion:this.props.webBrowserVersion}),v(this,"componentDidMount",()=>{let{contextLogData:e={},playing:t}=this.props,{is_closeup_video:i=!1}=e;(0,m.tE)("videoMounted",!1,i),t&&(this.videoVisibleTime=new Date,this.logPlaybackPerformance(y.DR,{initiator:"mount"}));let r=this.videoPlayerRef?.video?.textTracks[0];r&&r.addEventListener("cuechange",()=>{let e=r.activeCues[0];e&&e.line&&(e.line=-6,e.size=88)})}),v(this,"componentDidUpdate",e=>{let{playing:t,visible:i,appInFocus:r,seekTime:a,captionsEnabled:s}=this.props;a&&a!==e.seekTime&&this.setState({videoStartTime:a});let n=this.videoPlayerRef?.video?.textTracks[0];n&&(s?n.mode="showing":n.mode="disabled"),e.appInFocus&&!r&&(this.logPlaybackPerformance(y.$f,{initiator:"update"}),this.logSessionStartOnNextPlay=!0),e.visible&&!1===i&&(this.logSessionStartOnNextPlay=!1,this.updatePauseDuration(),this.logPlaybackPerformance(y.$f,{initiator:"update"})),!1===e.visible&&!0===i&&(this.videoVisibleTime=this.videoVisibleTime||new Date,t?(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(y.DR,{initiator:"update"})):this.logSessionStartOnNextPlay=!0),t&&r&&this.logSessionStartOnNextPlay&&(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(y.DR,{initiator:"update"}),this.logSessionStartOnNextPlay=!1)}),v(this,"addSegment",()=>{let{canPlayTime:e,loadStartTime:t,segments:i,srcString:r}=this.playbackPerformance,a=-1;e&&t&&0===i.length&&(a=e>t?e-t:0);let s=this.videoPlayerRef&&this.videoPlayerRef.video,n={indicatedKbps:-1,duration:s&&s.duration*y.gJ||-1,lastStartPlayTime:null,level:-1,numServerAddressChange:-1,observedKbps:-1,playbackStartDate:null,serverAddress:"",sourceWidth:-1,sourceHeight:-1,startupTimeMs:a,switchBitrateKbps:-1,uri:r,viewportWidth:s&&s.clientWidth||-1,viewportHeight:s&&s.clientHeight||-1,watchedDurationMs:0};i.push(n)}),v(this,"getCurrentVideoTime",()=>this.videoPlayerRef&&this.videoPlayerRef.video?this.videoPlayerRef.video.currentTime*y.gJ:0),v(this,"getVideoResourceTiming",()=>{if(window?.performance?.getEntriesByName&&this.playbackPerformance.srcString){let e=window.performance.getEntriesByName(this.playbackPerformance.srcString);return e.length>0&&e[0]||null}return null}),v(this,"handleCanPlayVideo",e=>{let{contextLogData:t={},onReady:i,playing:r}=this.props,{is_closeup_video:a=!1}=t,{canPlayVideo:s}=this.state;(0,m.tE)("handleCanPlayVideo",!1,a,{firstCanPlayEvent:!s,playing:r}),this.playbackPerformance.hasFatalError=!1,s||(this.playbackPerformance.canPlayTime=new Date),this.setState({canPlayVideo:!0}),i&&i(e)}),v(this,"handleEnded",e=>{let{loop:t,onEnded:i}=this.props,{segments:r}=this.playbackPerformance,a=r&&r[r.length-1];t&&this.videoPlayerRef&&this.videoPlayerRef.video?(this.updateWatchDurationForCurrentSegment(),a&&(a.lastStartPlayTime=0),this.hasSegmentStarted=!1):t||this.logPlaybackPerformance(y.$f,{initiator:"videoEnded",loop:t}),this.setState({playbackState:y.Cy.ENDED}),i&&i(e)}),v(this,"handleError",()=>{let{contextLogData:e={}}=this.props,{is_closeup_video:t=!1}=e,i=this.videoPlayerRef&&this.videoPlayerRef.video;i?.error?.code!==y.lG.MEDIA_ERR_ABORTED&&(this.playbackPerformance.hasFatalError=!0),this.playbackPerformance.detailedErrors+=`${this.playbackPerformance.detailedErrors.length>0?", ":""}${i?.error?.message||""}`,this.playbackPerformance.errorCode=i?.error?.code||0,this.playbackPerformance.errorName=i?.error?.message?.slice(0,100)||"unknown",this.playbackPerformance.errorReason=i?.error?.message?.slice(0,100)||"unknown";let r={errorName:this.playbackPerformance.errorCode,errorReason:this.playbackPerformance.errorName,errorRetryCount:this.errorRetryCount,playbackState:this.state.playbackState,networkState:i?.networkState||"unknown"};switch((0,m.tE)("fatalError",!1,t,r),i?.error?.code){case y.lG.MEDIA_ERR_ABORTED:break;case y.lG.MEDIA_ERR_NETWORK:case y.lG.MEDIA_ERR_DECODE:case y.lG.MEDIA_ERR_SRC_NOT_SUPPORTED:default:this.errorRetryCount>0&&(i?.load(),this.errorRetryCount-=1)}this.updateWatchDurationForCurrentSegment(),this.setState({playbackState:y.Cy.FAILED})}),v(this,"handleLoadedMetadata",()=>{this.setState({playbackState:y.Cy.LOADED_METADATA})}),v(this,"handleLoadStart",()=>{this.playbackPerformance.loadStartTime=new Date,this.setState({playbackState:y.Cy.LOAD_START})}),v(this,"handleLoadedData",()=>{this.setState({playbackState:y.Cy.LOADED_DATA})}),v(this,"handlePlaying",e=>{this.playbackPerformance.hasFatalError=!1,this.setPlaybackStartTime(),this.hasSegmentStarted||this.addSegment(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.updateStallDuration(),this.updatePauseDuration(),this.setState({playbackState:y.Cy.PLAYING}),this.props.clearSeekTime&&this.props.clearSeekTime(),this.props.onPlaying&&this.props.onPlaying(e)}),v(this,"handleUserPause",({event:e})=>{let{onControlsPause:t}=this.props;this.lastPauseTime=new Date,t&&t({event:e})}),v(this,"handleVideoPause",()=>{this.state.playbackState===y.Cy.STALLING||this.state.playbackState===y.Cy.SEEKING||(this.updateWatchDurationForCurrentSegment(),this.lastPauseTime||this.updateStallDuration()),this.setState({playbackState:y.Cy.PAUSED})}),v(this,"handleSeeking",()=>{this.playbackPerformance.numberOfSeeks+=1;let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&(t.lastStartPlayTime=null),this.state.playbackState!==y.Cy.ENDED&&this.setState({playbackState:y.Cy.SEEKING})}),v(this,"handleStalled",()=>{null===this.lastStallTime&&this.state.playbackState!==y.Cy.ENDED&&(this.lastStallTime=new Date,this.playbackPerformance.numberOfStalls+=1,this.setState({playbackState:y.Cy.STALLING}))}),v(this,"handleTimeUpdate",e=>{let{onTimeChange:t}=this.props;t&&t(e),this.state.playbackState===y.Cy.PLAYING&&(this.updateWatchDurationForCurrentSegment(),this.setLastSegmentStartPlayTime())}),v(this,"resetPlaybackMetrics",()=>{this.hasSegmentStarted=!0,this.hasPlaybackStarted=!1,this.hasVideoSessionStarted=!1,this.hasVideoSessionEnded=!0,this.lastStallTime=null,this.lastPauseTime=null,this.videoSessionId="",this.videoVisibleTime=null,this.logSessionStartOnNextPlay=!1;let e=this.playbackPerformance.segments[this.playbackPerformance.segments.length-1],t={...e,lastStartPlayTime:null,playbackStartDate:null,watchedDurationMs:0};this.playbackPerformance.detailedErrors="",this.playbackPerformance.errorCode=0,this.playbackPerformance.errorName="",this.playbackPerformance.errorReason="",this.playbackPerformance.hasFatalError=!1,this.playbackPerformance.numberOfStalls=0,this.playbackPerformance.numberOfSeeks=0,this.playbackPerformance.playbackStartTimestamp=null,this.playbackPerformance.totalStallDurationMs=0,this.playbackPerformance.segments=[t]}),v(this,"setLastSegmentStartPlayTime",()=>{let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.lastStartPlayTime&&(t.lastStartPlayTime=this.getCurrentVideoTime())}),v(this,"setLastSegmentPlaybackStartDate",()=>{let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.playbackStartDate&&(t.playbackStartDate=Date.now())}),v(this,"setPlaybackStartTime",()=>{this.hasPlaybackStarted||(this.playbackPerformance.playbackStartTimestamp=Date.now(),this.hasPlaybackStarted=!0)}),v(this,"setVideoPlayerRef",e=>{let{setVideoRef:t}=this.props;if(e&&(t&&t(e),this.videoPlayerRef=e,this.videoPlayerRef.video)){let e=this.videoPlayerRef.video;e.addEventListener("loadedmetadata",this.handleLoadedMetadata),e.addEventListener("loadeddata",this.handleLoadedData),e.addEventListener("pause",this.handleVideoPause),e.readyState>=3&&(this.setState({canPlayVideo:!0}),this.playbackPerformance.canPlayTime=new Date)}}),v(this,"updateStallDuration",()=>{if(null!==this.lastStallTime){let{lastStallTime:e}=this;this.playbackPerformance.totalStallDurationMs+=new Date-e,this.lastStallTime=null}}),v(this,"updatePauseDuration",()=>{if(null!==this.lastPauseTime){let{lastPauseTime:e}=this;this.playbackPerformance.totalPauseDurationMs+=new Date-e,this.lastPauseTime=null}}),v(this,"updateWatchDurationForCurrentSegment",()=>{let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1],i=t?t.lastStartPlayTime:null,r=this.getCurrentVideoTime();if(t&&null!==i&&"number"==typeof r&&"number"==typeof i){let e=r-i;e>0&&(t.watchedDurationMs+=e,t.lastStartPlayTime=null)}}),v(this,"logPlaybackPerformance",(e,t)=>{let{contextLogData:i={},userId:r,isAutoPlay:a,logContextEvent:s,preload:n,webBrowser:o,webBrowserVersion:l}=this.props,{is_closeup_video:d=!1}=i,{canPlayTime:u,detailedErrors:c,errorCode:h,errorName:p,errorReason:f,hasFatalError:S,loadStartTime:v,totalPauseDurationMs:b,totalStallDurationMs:E,numberOfStalls:g,numberOfSeeks:_,playbackStartTimestamp:P,segments:T,srcString:R}=this.playbackPerformance,I=this.videoPlayerRef&&this.videoPlayerRef.video,D=e===y.DR,w=D&&!this.hasVideoSessionStarted,A=!D&&!this.hasVideoSessionEnded&&this.hasVideoSessionStarted;if(I&&(w||A)){let w=-1;u&&v&&(w=u>v?u-v:0);let A=-1;u&&this.videoVisibleTime&&(A=u>this.videoVisibleTime?u-this.videoVisibleTime:0),D&&(this.videoSessionId=(0,y.Y7)(r),this.playerId=this.playerId||(0,y.EB)());let O=this.getVideoResourceTiming(),C={averageVideoKbps:-1,autoplaying:a,detailedErrors:c,downloadedKiloBytes:"number"==typeof O?.decodedBodySize&&O.decodedBodySize/y.Fm||0,errorCode:h,errorName:p,errorReason:f,fatalError:S,isCellular:!1,nativeVideoDurationMs:I.duration*y.gJ||-1,numberOfStalls:g,numberOfSeeks:_,overallPausedDurationMs:b,overallBufferDurationMs:E,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:this.videoSessionId,playbackStartTimestamp:P||-1,segments:[],sessionMark:e,screenPixelScale:window?.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:I.clientWidth,startupPlayerHeight:I.clientHeight,startupTimeMs:w,startupLatencyMs:A,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:I.videoWidth,startupVariantHeight:I.videoHeight,videoUrl:R,wasVideoPreloaded:"auto"===n};if(!D){this.updateWatchDurationForCurrentSegment(),this.updateStallDuration();let e=T.reduce((e,t)=>e+(t.watchedDurationMs||0),0);C.overallWatchedDurationMs=e,C.startupVariantWatchedDurationMs=e,C.segments=this.playbackPerformance.segments,0===e?(C.errorName="invalid_watch_duration",C.rebufferRate=-1):C.rebufferRate=E/e}(0,m.ZP)(C,!1,d,{playbackState:this.state.playbackState,...t});let{view:k,viewParameter:x,component:N,element:L,objectId:M,...V}=i;s({event_type:3606,event_data:{videoPerformanceData:C},view_type:k,view_parameter:x,component:N,element:L,object_id_str:M,aux_data:{...V,is_closeup_video:d,playback_session_id:this.videoSessionId,web_browser:o,web_browser_version:l}}),D?(this.hasVideoSessionStarted=!0,this.hasVideoSessionEnded=!1):this.resetPlaybackMetrics(),(0,m.tE)(D?"sessionStart":"sessionEnd",!1,d,{playbackState:this.state.playbackState,...t})}})}componentWillUnmount(){let{loop:e}=this.props;this.updatePauseDuration(),this.logPlaybackPerformance(y.$f,{initiator:"unmount",loop:e})}render(){let{aspectRatio:e,captions:t,controls:i,loop:a,loopOverride:s,objectFit:n,onDurationChange:o,onFullscreenChange:l,onLoadedChange:d,onControlsPlay:c,onPlayheadDown:p,onPlayheadUp:m,onSeek:y,onVolumeChange:v,playbackRate:E,playing:g,playsInline:_,poster:P,preload:T,src:R,volume:I}=this.props,{canPlayVideo:D,videoStartTime:w}=this.state;return(0,S.jsxs)(r.Fragment,{children:[(0,S.jsx)(h.Z,{unsafeCSS:f.P}),(0,S.jsx)(u.nk,{ref:this.setVideoPlayerRef,aspectRatio:e,autoplay:D&&g,captions:t,controls:i,loop:void 0===s?a:s,objectFit:n,onControlsPause:this.handleUserPause,onControlsPlay:c,onDurationChange:o,onEnded:this.handleEnded,onError:this.handleError,onFullscreenChange:l,onLoadedChange:d,onLoadStart:this.handleLoadStart,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:p,onPlayheadUp:m,onPlaying:this.handlePlaying,onReady:this.handleCanPlayVideo,onSeek:y,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:v,onWaiting:this.handleStalled,playbackRate:E,playing:D&&g,playsInline:_,poster:P,preload:T,src:b(R),startTime:w||void 0,volume:I})]})}}let g=(0,r.memo)(function(e){let{logContextEvent:t}=(0,c.v)(),{country:i,isAuthenticated:r,isBot:a,isSocialBot:o,unauthId:l,userAgent:u}=(0,s.B)(),{browserName:h,browserVersion:y,isMobile:f}=u,{contextLogData:v={}}=e,{is_closeup_video:b=!1,view:g,viewParameter:_}=v,{appUI:{appInFocus:P}}=(0,d.I)(),{clearSeekTime:T}=(0,n.RC)(),R=(0,p.Z)();return(0,m.r$)({browserName:h,browserVersion:y,country:i,isAuthenticated:r,isBot:a,is_closeup_video:b,isMobile:f,isSocialBot:o,view:g,viewParameter:_}),(0,S.jsx)(E,{...e,appInFocus:P,clearSeekTime:T,logContextEvent:t,userId:R.id||l,webBrowser:h,webBrowserVersion:y})});function _(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let P=e=>{if(Array.isArray(e)){let t=e.find(e=>"video/m3u8"===e.type);return t?t.src:void 0}return/m3u8$/.test(e)?e:void 0};class T extends r.PureComponent{constructor(...e){super(...e),_(this,"componentDidUpdate",e=>{e.videoStartTime&&this.props.videoStartTime&&e.videoStartTime<this.props.videoStartTime&&this.videoPlayerRef?.video&&(this.videoPlayerRef.video.currentTime=this.props.videoStartTime)}),_(this,"isHslVideo",()=>{let e=P(this.props.src);return!this.props.preferMp4&&!(0,a.G6)(this.props.requestContext.userAgent.browserName)&&!!e}),_(this,"setVideoPlayerRef",e=>{e&&(this.videoPlayerRef=e)}),_(this,"handleOnEnded",({event:e})=>{let{loop:t,onLoop:i,onEnded:r}=this.props;r&&(r({event:e}),this.videoPlayerRef&&this.videoPlayerRef.video&&t&&(this.videoPlayerRef.video.play(),i&&i()))}),_(this,"handlePlaying",e=>{this.props.onPlaying&&this.props.onPlaying(e)})}render(){let{aspectRatio:e,appInFocus:t,backgroundColor:i,captions:r,toggleCaptions:a,clearSeekTime:s,contextLogData:n,controls:l,hlsConfig:d,isAutoPlay:u,loop:c,objectFit:h,onDurationChange:p,onEnded:m,onFullscreenChange:y,onLoadedChange:f,onControlsPause:v,onControlsPlay:b,onPlayheadDown:E,onPlayheadUp:_,onReady:T,onSeek:R,onTimeChange:I,onVolumeChange:D,playbackRate:w,playing:A,playsInline:O,poster:C,preferMp4:k,preload:x,seekTime:N,src:L,videoStartTime:M,visible:V,volume:U}=this.props,H=P(L),F={...d,startPosition:M||-1},j=!m&&c;return this.isHslVideo()&&H?(0,S.jsx)(o.Z,{appInFocus:t,aspectRatio:e,backgroundColor:i,captions:r,captionsEnabled:a,clearSeekTime:s,contextLogData:n,controls:l,hlsConfig:F,isAutoPlay:u,loop:c,loopOverride:j,objectFit:h,onControlsPause:v,onControlsPlay:b,onDurationChange:p,onEnded:this.handleOnEnded,onFullscreenChange:y,onLoadedChange:f,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:E,onPlayheadUp:_,onPlaying:this.handlePlaying,onReady:T,onSeek:R,onTimeChange:I,onVolumeChange:D,playbackRate:w,playing:A,playsInline:O,poster:C,preload:x,seekTime:N,setVideoRef:this.setVideoPlayerRef,src:H,visible:V,volume:U}):(0,S.jsx)(g,{aspectRatio:e,captions:r,captionsEnabled:a,clearSeekTime:s,contextLogData:n,controls:l,isAutoPlay:u,loop:c,loopOverride:j,objectFit:h,onControlsPause:v,onControlsPlay:b,onDurationChange:p,onEnded:this.handleOnEnded,onFullscreenChange:y,onLoadedChange:f,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:E,onPlayheadUp:_,onPlaying:this.handlePlaying,onReady:T,onSeek:R,onTimeChange:I,onVolumeChange:D,playbackRate:w,playing:A,playsInline:O,poster:C,preload:x,seekTime:N,setVideoRef:this.setVideoPlayerRef,src:k?L:H||L,videoStartTime:M,visible:V,volume:U})}}function R(e){let{appUI:{appInFocus:t}}=(0,d.I)(),{seekTime:i}=(0,n.Hx)(),{captionsEnabled:r}=(0,l.rG)(),{clearSeekTime:a}=(0,n.RC)(),o=(0,s.B)();return(0,S.jsx)(T,{...e,appInFocus:t,clearSeekTime:a,requestContext:o,seekTime:i,toggleCaptions:r})}},181056:(e,t,i)=>{i.d(t,{Ul:()=>s,VS:()=>r,hy:()=>n,iM:()=>a,j4:()=>o});let r=2,a=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1],s={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",bottom:0},n=128,o=e=>e&&document.querySelector(`video[poster="${e}"]`)||null}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/AuthDesktopPinRep-4a312ca28fbf7be7.mjs.map
